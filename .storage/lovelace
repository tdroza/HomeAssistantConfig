{
  "version": 1,
  "minor_version": 1,
  "key": "lovelace",
  "data": {
    "config": {
      "button_card_templates": {
        "button-card-headers": {
          "styles": {
            "card": [
              {
                "text-transform": "uppercase"
              },
              {
                "font-size": "150%"
              },
              {
                "font-weight": 100
              },
              {
                "letter-spacing": "10px"
              },
              {
                "background-color": "var(--card-background-color);"
              }
            ]
          }
        }
      },
      "swipe_nav": {
        "animate": "swipe",
        "wrap": true
      },
      "title": "Millview",
      "views": [
        {
          "badges": null,
          "cards": [
            {
              "cards": [
                {
                  "name": "Phones",
                  "template": "button-card-headers",
                  "type": "custom:button-card"
                },
                {
                  "entities": [
                    {
                      "entity": "person.tom",
                      "name": "Location"
                    },
                    {
                      "entity": "sensor.toms_phone_wifi_connection",
                      "name": "Wifi"
                    },
                    {
                      "entity": "sensor.toms_phone_wifi_connection",
                      "icon": true,
                      "name": false
                    },
                    {
                      "entity": "binary_sensor.toms_phone_android_auto",
                      "icon": true,
                      "name": false,
                      "state_color": true
                    },
                    {
                      "entity": "sensor.toms_phone_battery_level",
                      "icon": true,
                      "state_color": true,
                      "name": false
                    }
                  ],
                  "entity": "person.tom",
                  "icon": "mdi:human-male",
                  "image": "/local/tom.jpg",
                  "name": "Tom",
                  "secondary_info": "last-updated",
                  "show_state": false,
                  "type": "custom:multiple-entity-row"
                },
                {
                  "entities": [
                    {
                      "entity": "person.anna",
                      "name": "Location"
                    },
                    {
                      "entity": "sensor.annas_phone_wifi_connection",
                      "name": "Wifi"
                    },
                    {
                      "entity": "sensor.annas_phone_wifi_connection",
                      "icon": true,
                      "name": false
                    },
                    {
                      "entity": "binary_sensor.annas_phone_android_auto",
                      "icon": true,
                      "state_color": true,
                      "name": false
                    },
                    {
                      "entity": "sensor.annas_phone_battery_level",
                      "icon": true,
                      "state_color": true,
                      "name": false
                    }
                  ],
                  "entity": "person.anna",
                  "icon": "mdi:human-female",
                  "image": "/local/anna.jpg",
                  "name": "Anna",
                  "secondary_info": "last-updated",
                  "show_state": false,
                  "type": "custom:multiple-entity-row"
                }
              ],
              "type": "vertical-stack"
            },
            {
              "card": {
                "icon": "mdi:light-switch",
                "name": "Turn everything off",
                "tap_action": {
                  "action": "call-service",
                  "service": "light.turn_off",
                  "service_data": {
                    "entity_id": "all"
                  }
                },
                "type": "custom:button-card"
              },
              "conditions": [
                {
                  "condition": "state",
                  "entity": "binary_sensor.lights_are_on",
                  "state": "on"
                }
              ],
              "type": "conditional"
            },
            {
              "cards": [
                {
                  "name": "Lights",
                  "template": "button-card-headers",
                  "type": "custom:button-card"
                },
                {
                  "entities": [
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "input_boolean.xmas_mode",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "type": "custom:fold-entity-row",
                        "head": {
                          "type": "section",
                          "label": "Xmas"
                        },
                        "open": true,
                        "entities": [
                          {
                            "entities": [
                              {
                                "entity": "light.window"
                              },
                              {
                                "entity": "light.twinkly"
                              },
                              {
                                "entity": "light.tree_3"
                              },
                              {
                                "entity": "light.christmas_star"
                              },
                              {
                                "entity": "light.advent"
                              }
                            ],
                            "head": {
                              "entity": "light.xmas_light_group",
                              "icon": "mdi:string-lights",
                              "name": "Christmas Lights"
                            },
                            "type": "custom:fold-entity-row"
                          }
                        ]
                      }
                    },
                    {
                      "type": "custom:fold-entity-row",
                      "head": {
                        "type": "section",
                        "label": "Downstairs"
                      },
                      "open": true,
                      "entities": [
                        "light.hallway",
                        {
                          "entities": [
                            {
                              "entity": "light.living_room_ceiling",
                              "type": "custom:slider-entity-row"
                            },
                            {
                              "entity": "light.living_room_1",
                              "type": "custom:slider-entity-row"
                            },
                            {
                              "entity": "light.living_room_2",
                              "type": "custom:slider-entity-row"
                            },
                            "light.tv_backlight",
                            "light.solar_lamp"
                          ],
                          "head": {
                            "entity": "light.living_room_light_group",
                            "name": "Living Room",
                            "icon": "mdi:lightbulb-group-outline"
                          },
                          "type": "custom:fold-entity-row"
                        }
                      ]
                    },
                    {
                      "type": "custom:fold-entity-row",
                      "head": {
                        "type": "section",
                        "label": "Upstairs"
                      },
                      "open": true,
                      "entities": [
                        {
                          "type": "custom:fold-entity-row",
                          "head": {
                            "entity": "light.main_bedroom_light_group",
                            "name": "Main bedroom",
                            "icon": "mdi:lightbulb-group-outline"
                          },
                          "entities": [
                            {
                              "entity": "light.main_bedroom_ceiling",
                              "name": "Ceiling",
                              "toggle": true,
                              "ype": "custom:slider-entity-row"
                            },
                            {
                              "type": "custom:rgb-light-card",
                              "entity": "light.main_bedroom_ceiling",
                              "hide_when_off": true,
                              "justify": "center",
                              "colors": [
                                {
                                  "color_temp": 200,
                                  "icon_color": "linear-gradient(15deg, rgba(255,255,255,1) 0%, rgba(193,193,193,1) 100%)"
                                },
                                {
                                  "color_temp": 242,
                                  "icon_color": "linear-gradient(15deg, rgba(255,231,185,1) 0%, rgba(196,220,229,1) 100%)"
                                },
                                {
                                  "color_temp": 284,
                                  "icon_color": "linear-gradient(15deg, rgba(255,199,110,1) 0%, rgba(233,233,233,1) 100%)"
                                },
                                {
                                  "color_temp": 326,
                                  "icon_color": "linear-gradient(15deg, rgba(255,220,167,1) 0%, rgba(193,183,116,1) 100%)"
                                },
                                {
                                  "color_temp": 357,
                                  "icon_color": "linear-gradient(15deg, rgba(255,205,126,1) 0%, rgba(252,156,49,1) 100%)"
                                },
                                {
                                  "color_temp": 370,
                                  "icon_color": "linear-gradient(15deg, rgba(255,190,92,1) 0%, rgba(255,123,0,1) 100%)"
                                }
                              ]
                            },
                            {
                              "entity": "light.main_bedroom_bloom",
                              "name": "Bloom",
                              "toggle": true,
                              "type": "custom:slider-entity-row"
                            },
                            {
                              "type": "custom:rgb-light-card",
                              "entity": "light.main_bedroom_bloom",
                              "hide_when_off": true,
                              "justify": "center",
                              "colors": [
                                {
                                  "rgb_color": [
                                    255,
                                    0,
                                    0
                                  ]
                                },
                                {
                                  "rgb_color": [
                                    255,
                                    165,
                                    0
                                  ]
                                },
                                {
                                  "rgb_color": [
                                    255,
                                    255,
                                    0
                                  ]
                                },
                                {
                                  "rgb_color": [
                                    0,
                                    255,
                                    0
                                  ]
                                },
                                {
                                  "rgb_color": [
                                    0,
                                    0,
                                    255
                                  ]
                                },
                                {
                                  "rgb_color": [
                                    255,
                                    0,
                                    255
                                  ]
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "type": "custom:fold-entity-row",
                          "head": {
                            "entity": "light.second_bedroom_light_group",
                            "name": "Office",
                            "icon": "mdi:lightbulb-group-outline"
                          },
                          "entities": [
                            {
                              "entity": "light.second_bedroom_ceiling",
                              "toggle": true,
                              "name": "Ceiling",
                              "type": "custom:slider-entity-row"
                            },
                            {
                              "entity": "light.toms_desk_master",
                              "toggle": true,
                              "type": "custom:slider-entity-row"
                            },
                            {
                              "entity": "light.annas_desk",
                              "toggle": true,
                              "type": "custom:slider-entity-row"
                            }
                          ]
                        },
                        {
                          "type": "custom:fold-entity-row",
                          "head": {
                            "entity": "light.sebs_bedroom_light_group",
                            "name": "Seb's bedroom",
                            "icon": "mdi:lightbulb-group-outline"
                          },
                          "entities": [
                            {
                              "entity": "light.sebs_ceiling",
                              "type": "custom:slider-entity-row",
                              "toggle": true
                            },
                            {
                              "type": "custom:rgb-light-card",
                              "entity": "light.sebs_ceiling",
                              "hide_when_off": true,
                              "justify": "center",
                              "colors": [
                                {
                                  "rgb_color": [
                                    255,
                                    0,
                                    0
                                  ]
                                },
                                {
                                  "rgb_color": [
                                    255,
                                    165,
                                    0
                                  ]
                                },
                                {
                                  "rgb_color": [
                                    255,
                                    255,
                                    0
                                  ]
                                },
                                {
                                  "rgb_color": [
                                    0,
                                    255,
                                    0
                                  ]
                                },
                                {
                                  "rgb_color": [
                                    0,
                                    0,
                                    255
                                  ]
                                },
                                {
                                  "rgb_color": [
                                    255,
                                    0,
                                    255
                                  ]
                                }
                              ]
                            },
                            {
                              "entity": "light.sebs_floorlamp",
                              "name": "Floorlamp",
                              "toggle": true,
                              "type": "custom:slider-entity-row"
                            },
                            {
                              "entity": "light.sebs_lamp",
                              "toggle": true,
                              "type": "custom:slider-entity-row"
                            },
                            {
                              "entity": "switch.sebs_galaxy"
                            }
                          ]
                        },
                        {
                          "type": "custom:fold-entity-row",
                          "head": {
                            "entity": "light.reubens_bedroom_light_group",
                            "name": "Reuben's bedroom",
                            "icon": "mdi:lightbulb-group-outline"
                          },
                          "entities": [
                            {
                              "entity": "light.reubens_ceiling",
                              "toggle": true,
                              "name": "Ceiling",
                              "type": "custom:slider-entity-row"
                            },
                            {
                              "type": "custom:rgb-light-card",
                              "entity": "light.reubens_ceiling",
                              "hide_when_off": true,
                              "justify": "center",
                              "colors": [
                                {
                                  "rgb_color": [
                                    255,
                                    0,
                                    0
                                  ]
                                },
                                {
                                  "rgb_color": [
                                    255,
                                    165,
                                    0
                                  ]
                                },
                                {
                                  "rgb_color": [
                                    255,
                                    255,
                                    0
                                  ]
                                },
                                {
                                  "rgb_color": [
                                    0,
                                    255,
                                    0
                                  ]
                                },
                                {
                                  "rgb_color": [
                                    0,
                                    0,
                                    255
                                  ]
                                },
                                {
                                  "rgb_color": [
                                    255,
                                    0,
                                    255
                                  ]
                                }
                              ]
                            },
                            {
                              "entity": "light.rname",
                              "toggle": true,
                              "type": "custom:slider-entity-row"
                            },
                            {
                              "entity": "switch.reus_galaxy"
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "buttons",
                      "entities": [
                        {
                          "entity": "group.all_my_lights",
                          "name": "All Lights"
                        }
                      ]
                    }
                  ],
                  "show_header_toggle": false,
                  "type": "entities"
                }
              ],
              "type": "vertical-stack"
            },
            {
              "cards": [
                {
                  "card": null,
                  "name": "Rooms",
                  "template": "button-card-headers",
                  "type": "custom:button-card"
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "custom:mushroom-template-card",
                      "primary": "Living Room",
                      "secondary": "{{ state_attr('climate.hive_thermostat', 'current_temperature') }}°C",
                      "icon": "mdi:sofa",
                      "entity": "light.living_room_light_group",
                      "tap_action": {
                        "action": "navigate",
                        "navigation_path": "/lovelace/living-room"
                      },
                      "hold_action": {
                        "action": "toggle"
                      },
                      "icon_color": "{% if is_state('light.living_room_light_group','on') %}\n{{ '#%02x%02x%02x' % state_attr('light.living_room_light_group','rgb_color') }}\n{% endif %}",
                      "multiline_secondary": false,
                      "badge_color": "{% if is_state_attr('climate.hive_thermostat','hvac_action', 'heating') %}\nred\n{% else %}\n  {% if is_state('binary_sensor.living_room_door', 'on') %}\n  orange\n  {% endif %}\n{% endif %}",
                      "badge_icon": "{% if is_state_attr('climate.hive_thermostat','hvac_action', 'heating') %}\nmdi:fire\n{% else %}\n  {% if is_state('binary_sensor.living_room_door', 'on') %}\n  mdi:door-open\n  {% else %}\n  mdi:door-closed\n  {% endif %}\n{% endif %}"
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "primary": "Kitchen",
                      "secondary": "{{ states('sensor.kitchen_climate_temperature') }}°C",
                      "icon": "mdi:fridge",
                      "entity": "binary_sensor.fridge_door",
                      "tap_action": {
                        "action": "navigate",
                        "navigation_path": "/lovelace/kitchen"
                      },
                      "hold_action": {
                        "action": "toggle"
                      },
                      "icon_color": "{% if is_state('binary_sensor.fridge_door','on') %}\n{%   if (as_timestamp(now()) - as_timestamp(states.binary_sensor.fridge_door.last_changed) > 60) %}\nred\n{%   else %}\norange\n{%   endif %}\n{% endif %}",
                      "badge_color": "{%   if (as_timestamp(now()) - as_timestamp(states.binary_sensor.fridge_door.last_changed) > 60) %}\nred\n{%   else %}\norange\n{%   endif %}",
                      "badge_icon": "{% if is_state('binary_sensor.fridge_door', 'on') %}\nmdi:door-open\n{% endif %}"
                    }
                  ]
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "custom:mushroom-template-card",
                      "primary": "Hallway",
                      "secondary": "{{ states('sensor.hue_motion_sensor_temperature') }}°C",
                      "icon": "mdi:coat-rack",
                      "tap_action": {
                        "action": "navigate",
                        "navigation_path": "/lovelace/hallway"
                      },
                      "hold_action": {
                        "action": "toggle"
                      },
                      "icon_color": "{% if is_state('light.hallway','on') %}\norange\n{% endif %}",
                      "badge_icon": "{% if is_state('binary_sensor.hue_motion_sensor_motion', 'on') %}\nmdi:motion-sensor\n{% endif %}",
                      "badge_color": "blue",
                      "entity": "light.hallway"
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "primary": "Utility",
                      "secondary": "{{states('sensor.washing_machine_count')}} washes this week",
                      "icon": "{% if is_state('binary_sensor.washer','on') %}\nmdi:washing-machine\n{% else %}\nmdi:washing-machine-off\n{% endif %}",
                      "icon_color": "{% if is_state('binary_sensor.washer','on') %}\ngreen\n{% endif %}",
                      "entity": "binary_sensor.washer",
                      "tap_action": {
                        "action": "navigate",
                        "navigation_path": "/lovelace/utility"
                      },
                      "hold_action": {
                        "action": "toggle"
                      },
                      "badge_color": "{% if states('sensor.mixergy_electric_heat_power') | float > 0 %}\norange\n{% elif states('sensor.mixergy_electric_pv_power') | float > 0 %}\nblue\n{% elif is_state_attr('climate.hive_thermostat','hvac_action','heating') %}\nred\n{% elif is_state('switch.heated_airer','on') %}\ngreen\n{% endif %}",
                      "badge_icon": "{% if states('sensor.mixergy_electric_heat_power') | float > 0 %}\nmdi:thermometer-water\n{% elif states('sensor.mixergy_electric_pv_power') | float > 0 %}\nmdi:water-boiler\n{% elif is_state_attr('climate.hive_thermostat','hvac_action','heating') %}\nmdi:heat-pump-outline\n{% elif is_state('switch.heated_airer','on') %}\nmdi:tumble-dryer\n{% endif %}"
                    }
                  ]
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "custom:mushroom-template-card",
                      "primary": "Main Bedroom",
                      "secondary": "{{ state_attr('climate.main_bedroom_radiator_thermostat','current_temperature') }}°C",
                      "icon": "mdi:bed-king",
                      "entity": "light.main_bedroom_light_group",
                      "tap_action": {
                        "action": "navigate",
                        "navigation_path": "/lovelace/main-bedroom"
                      },
                      "hold_action": {
                        "action": "toggle"
                      },
                      "icon_color": "{% if is_state('light.main_bedroom_light_group','on') %}\n{{ '#%02x%02x%02x' % (state_attr('light.main_bedroom_light_group','rgb_color') or (255,193,7))}}\n{% endif %}",
                      "badge_color": "{% if is_state_attr('climate.hive_thermostat','hvac_action','heating') and state_attr('climate.main_bedroom_radiator_thermostat', 'temperature') | float(0) > state_attr('climate.main_bedroom_radiator_thermostat', 'current_temperature') | float(0) %}\nred\n{% elif is_state('binary_sensor.main_bedroom_door', 'on') %}\norange\n{% endif %}",
                      "badge_icon": "{% if is_state_attr('climate.hive_thermostat','hvac_action','heating') and state_attr('climate.main_bedroom_radiator_thermostat', 'temperature') | float(0) > state_attr('climate.main_bedroom_radiator_thermostat', 'current_temperature') | float(0) %}\nmdi:radiator\n{% elif is_state('binary_sensor.main_bedroom_door', 'on') %}\nmdi:door-open\n{% else %}\nmdi:door-closed\n{% endif %}"
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "primary": "Office",
                      "secondary": "{{ states('sensor.office_climate_temperature') }}°C",
                      "icon": "mdi:desk",
                      "entity": "light.second_bedroom_light_group",
                      "tap_action": {
                        "action": "navigate",
                        "navigation_path": "/lovelace/office"
                      },
                      "hold_action": {
                        "action": "toggle"
                      },
                      "icon_color": "{% if is_state('light.second_bedroom_light_group','on') %}\n{{'#%02x%02x%02x' % (state_attr('light.second_bedroom_light_group','rgb_color') or (255,193,7))}}\n{% endif %}"
                    }
                  ]
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "custom:mushroom-template-card",
                      "primary": "Seb's Room",
                      "secondary": "{{ states('sensor.seb_d1_temperature') }}°C",
                      "icon": "mdi:rocket-launch",
                      "entity": "light.sebs_bedroom_light_group",
                      "tap_action": {
                        "action": "navigate",
                        "navigation_path": "/lovelace/seb"
                      },
                      "hold_action": {
                        "action": "toggle"
                      },
                      "icon_color": "{% if is_state('light.sebs_bedroom_light_group','on') %}\n{{'#%02x%02x%02x' % state_attr('light.sebs_bedroom_light_group','rgb_color')}}\n{% endif %}",
                      "badge_color": "blue",
                      "badge_icon": "{% if is_state('binary_sensor.seb_d1_motion', 'on') %}\nmdi:motion-sensor\n{% endif %}"
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "primary": "Reu's Room",
                      "secondary": "{{ states('sensor.reu_d1_temperature') }}°C",
                      "icon": "mdi:dolphin",
                      "entity": "light.reubens_bedroom_light_group",
                      "tap_action": {
                        "action": "navigate",
                        "navigation_path": "/lovelace/reu"
                      },
                      "hold_action": {
                        "action": "toggle"
                      },
                      "icon_color": "{% if is_state('light.reubens_bedroom_light_group','on') %}\n{{ '#%02x%02x%02x' % state_attr('light.reubens_bedroom_light_group','rgb_color') }}\n{% endif %}",
                      "badge_color": "blue",
                      "badge_icon": "{% if is_state('binary_sensor.reu_d1_motion', 'on') %}\nmdi:motion-sensor\n{% endif %}"
                    }
                  ]
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "tile",
                      "entity": "sensor.bathroom_climate_temperature",
                      "tap_action": {
                        "action": "navigate",
                        "navigation_path": "/lovelace/bathrooms"
                      },
                      "name": "Bathroom",
                      "icon": "mdi:bathtub-outline"
                    },
                    {
                      "type": "tile",
                      "entity": "sensor.ensuite_climate_temperature",
                      "tap_action": {
                        "action": "navigate",
                        "navigation_path": "/lovelace/bathrooms"
                      },
                      "name": "Ensuite",
                      "icon": "mdi:shower-head"
                    }
                  ]
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "custom:mushroom-entity-card",
                      "entity": "binary_sensor.garage_door",
                      "secondary_info": "last-changed"
                    },
                    {
                      "type": "tile",
                      "entity": "sensor.outside_temperature_calibrated",
                      "name": "Outside Temp",
                      "show_entity_picture": false,
                      "hide_state": false
                    }
                  ]
                }
              ],
              "type": "vertical-stack"
            },
            {
              "type": "custom:expander-card",
              "title": "Weather",
              "cards": [
                {
                  "entity": "weather.millview",
                  "type": "custom:weather-card",
                  "number_of_forecasts": "5"
                }
              ],
              "clear": false,
              "expanded": false
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "sensor.sourdough_height",
                  "state_not": "unavailable"
                }
              ],
              "card": {
                "type": "vertical-stack",
                "cards": [
                  {
                    "name": "Sourdough",
                    "template": "button-card-headers",
                    "type": "custom:button-card"
                  },
                  {
                    "entities": [
                      "sensor.sourdough_height",
                      "sensor.sourdough_temperature"
                    ],
                    "type": "entities"
                  },
                  {
                    "entities": [
                      {
                        "entity": "sensor.sourdough_height",
                        "y_axis": "secondary"
                      },
                      "sensor.sourdough_temperature"
                    ],
                    "points_per_hour": 20,
                    "show": {
                      "icon": false,
                      "name": false
                    },
                    "type": "custom:mini-graph-card"
                  }
                ]
              }
            },
            {
              "type": "entities",
              "entities": [
                {
                  "entity": "input_boolean.do_not_disturb"
                }
              ]
            }
          ],
          "icon": "mdi:home-assistant",
          "path": "default_view",
          "title": "Home"
        },
        {
          "badges": [],
          "cards": [
            {
              "elements": [
                {
                  "entity": "binary_sensor.garage_door",
                  "style": {
                    "transform": "scale(5,5)",
                    "left": "12.5%",
                    "top": "84%"
                  },
                  "type": "state-icon"
                },
                {
                  "entity": "binary_sensor.living_room_door",
                  "style": {
                    "left": "57%",
                    "top": "60%"
                  },
                  "type": "state-icon"
                },
                {
                  "entity": "sensor.kitchen_temperature_rounded",
                  "style": {
                    "background": "center / contain no-repeat url(\"/local/nest.png\")",
                    "font-size": "13px",
                    "left": "36%",
                    "top": "10%"
                  },
                  "type": "state-label"
                },
                {
                  "entity": "sensor.air_quality_temperature_rounded",
                  "style": {
                    "background": "center / contain no-repeat url(\"/local/nest.png\")",
                    "font-size": "13px",
                    "left": "56%",
                    "top": "25%"
                  },
                  "type": "state-label"
                },
                {
                  "entity": "sensor.nest_temperature_rounded",
                  "style": {
                    "background": "center / contain no-repeat url(\"/local/nest.png\")",
                    "font-size": "13px",
                    "left": "87%",
                    "top": "45%"
                  },
                  "type": "state-label"
                },
                {
                  "entity": "binary_sensor.fridge_door",
                  "style": {
                    "transform": "scale(2,2)",
                    "left": "32%",
                    "top": "32%"
                  },
                  "type": "state-icon",
                  "icon": "mdi:fridge-variant"
                },
                {
                  "entity": "light.kitchen_corner",
                  "hold_action": {
                    "action": "more-info"
                  },
                  "style": {
                    "font-size": "12px",
                    "left": "36%",
                    "top": "4.5%"
                  },
                  "tap_action": {
                    "action": "toggle"
                  },
                  "type": "state-icon"
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "input_boolean.xmas_mode",
                      "state": "on"
                    }
                  ],
                  "elements": [
                    {
                      "type": "state-icon",
                      "entity": "light.advent",
                      "hold_action": {
                        "action": "more-info"
                      },
                      "style": {
                        "font-size": "12px",
                        "left": "87%",
                        "top": "39%"
                      },
                      "tap_action": {
                        "action": "toggle"
                      }
                    }
                  ]
                },
                {
                  "entity": "sensor.hallway_motion_sensor_temperature_rounded",
                  "style": {
                    "background": "center / contain no-repeat url(\"/local/nest.png\")",
                    "font-size": "13px",
                    "left": "47%",
                    "top": "44%"
                  },
                  "type": "state-label"
                },
                {
                  "entity": "light.hallway",
                  "hold_action": {
                    "action": "more-info"
                  },
                  "style": {
                    "font-size": "12px",
                    "left": "60%",
                    "top": "53%"
                  },
                  "tap_action": {
                    "action": "toggle"
                  },
                  "type": "state-icon"
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "input_boolean.xmas_mode",
                      "state": "on"
                    }
                  ],
                  "elements": [
                    {
                      "entity": "switch.christmas_star",
                      "hold_action": {
                        "action": "more-info"
                      },
                      "style": {
                        "font-size": "12px",
                        "left": "93%",
                        "top": "70%"
                      },
                      "tap_action": {
                        "action": "toggle"
                      },
                      "type": "state-icon"
                    }
                  ]
                },
                {
                  "entity": "light.tv_backlight",
                  "hold_action": {
                    "action": "more-info"
                  },
                  "style": {
                    "font-size": "12px",
                    "left": "80%",
                    "top": "45%"
                  },
                  "tap_action": {
                    "action": "toggle"
                  },
                  "type": "state-icon"
                },
                {
                  "entity": "light.living_room_1",
                  "hold_action": {
                    "action": "more-info"
                  },
                  "style": {
                    "transform": "scale(2,2)",
                    "font-size": "12px",
                    "left": "60%",
                    "top": "85%"
                  },
                  "tap_action": {
                    "action": "toggle"
                  },
                  "type": "state-icon"
                },
                {
                  "entity": "light.living_room_2",
                  "hold_action": {
                    "action": "more-info"
                  },
                  "style": {
                    "transform": "scale(2,2)",
                    "font-size": "12px",
                    "left": "85%",
                    "top": "85%"
                  },
                  "tap_action": {
                    "action": "toggle"
                  },
                  "type": "state-icon"
                }
              ],
              "image": "/local/FloorPlan_Downstairs.png",
              "type": "picture-elements"
            },
            {
              "elements": [
                {
                  "entity": "binary_sensor.main_bedroom_door",
                  "style": {
                    "left": "57%",
                    "top": "60%"
                  },
                  "type": "state-icon"
                },
                {
                  "entity": "light.main_bedroom_ceiling",
                  "hold_action": {
                    "action": "more-info"
                  },
                  "style": {
                    "font-size": "12px",
                    "left": "78%",
                    "top": "72%"
                  },
                  "tap_action": {
                    "action": "toggle"
                  },
                  "type": "state-icon"
                },
                {
                  "entity": "light.main_bedroom_bloom",
                  "hold_action": {
                    "action": "more-info"
                  },
                  "style": {
                    "font-size": "12px",
                    "left": "94%",
                    "top": "72%"
                  },
                  "tap_action": {
                    "action": "toggle"
                  },
                  "type": "state-icon"
                },
                {
                  "entity": "sensor.bed1_temperature_rounded",
                  "style": {
                    "background": "center / contain no-repeat url(\"/local/nest.png\")",
                    "font-size": "12px",
                    "left": "63%",
                    "top": "90%"
                  },
                  "type": "state-label"
                },
                {
                  "entity": "cover.large_blind",
                  "style": {
                    "left": "79%",
                    "top": "90%"
                  },
                  "type": "state-icon"
                },
                {
                  "entity": "cover.small_blind",
                  "style": {
                    "left": "94%",
                    "top": "85%"
                  },
                  "type": "state-icon"
                },
                {
                  "entity": "light.second_bedroom_ceiling",
                  "hold_action": {
                    "action": "more-info"
                  },
                  "style": {
                    "font-size": "12px",
                    "left": "82%",
                    "top": "23%"
                  },
                  "tap_action": {
                    "action": "toggle"
                  },
                  "type": "state-icon"
                },
                {
                  "entity": "light.annas_desk",
                  "hold_action": {
                    "action": "more-info"
                  },
                  "style": {
                    "transform": "scale(1.5,1.5)",
                    "left": "66%",
                    "top": "5%"
                  },
                  "tap_action": {
                    "action": "toggle"
                  },
                  "type": "state-icon"
                },
                {
                  "entity": "light.toms_desk_master",
                  "hold_action": {
                    "action": "more-info"
                  },
                  "style": {
                    "transform": "scale(1.5,1.5)",
                    "left": "88%",
                    "top": "25%"
                  },
                  "tap_action": {
                    "action": "toggle"
                  },
                  "type": "state-icon"
                },
                {
                  "entity": "cover.office_blind",
                  "style": {
                    "left": "94%",
                    "top": "35%"
                  },
                  "type": "state-icon"
                },
                {
                  "entity": "sensor.office_temperature_rounded",
                  "style": {
                    "background": "center / contain no-repeat url(\"/local/nest.png\")",
                    "font-size": "12px",
                    "left": "70%",
                    "top": "30%"
                  },
                  "type": "state-label"
                },
                {
                  "entity": "light.reubens_ceiling",
                  "hold_action": {
                    "action": "more-info"
                  },
                  "style": {
                    "font-size": "12px",
                    "left": "18%",
                    "top": "80%"
                  },
                  "tap_action": {
                    "action": "toggle"
                  },
                  "type": "state-icon"
                },
                {
                  "entity": "light.rname",
                  "hold_action": {
                    "action": "more-info"
                  },
                  "style": {
                    "font-size": "12px",
                    "left": "27%",
                    "top": "70%"
                  },
                  "tap_action": {
                    "action": "toggle"
                  },
                  "type": "state-icon"
                },
                {
                  "entity": "binary_sensor.reu_d1_motion",
                  "style": {
                    "font-size": "12px",
                    "left": "10%",
                    "top": "85%"
                  },
                  "type": "state-icon"
                },
                {
                  "entity": "sensor.reuben_temperature_rounded",
                  "style": {
                    "background": "center / contain no-repeat url(\"/local/nest.png\")",
                    "font-size": "12px",
                    "left": "10%",
                    "top": "89.5%"
                  },
                  "type": "state-label"
                },
                {
                  "entity": "light.sebs_ceiling",
                  "hold_action": {
                    "action": "more-info"
                  },
                  "style": {
                    "font-size": "12px",
                    "left": "50%",
                    "top": "23%"
                  },
                  "tap_action": {
                    "action": "toggle"
                  },
                  "type": "state-icon"
                },
                {
                  "entity": "binary_sensor.seb_d1_motion",
                  "style": {
                    "font-size": "12px",
                    "left": "38%",
                    "top": "15%"
                  },
                  "type": "state-icon"
                },
                {
                  "entity": "sensor.seb_temperature_rounded",
                  "style": {
                    "background": "center / contain no-repeat url(\"/local/nest.png\")",
                    "font-size": "12px",
                    "left": "38%",
                    "top": "10%"
                  },
                  "type": "state-label"
                },
                {
                  "entity": "switch.sonoff_1000d4baef_1",
                  "hold_action": {
                    "action": "more-info"
                  },
                  "style": {
                    "font-size": "12px",
                    "left": "38.5%",
                    "top": "5%"
                  },
                  "tap_action": {
                    "action": "toggle"
                  },
                  "type": "state-icon"
                },
                {
                  "entity": "light.rname",
                  "hold_action": {
                    "action": "more-info"
                  },
                  "style": {
                    "font-size": "12px",
                    "left": "48.5%",
                    "top": "40%"
                  },
                  "tap_action": {
                    "action": "toggle"
                  },
                  "type": "state-icon"
                },
                {
                  "entity": "sensor.bathroom_temperature_rounded",
                  "style": {
                    "background": "center / contain no-repeat url(\"/local/nest.png\")",
                    "font-size": "12px",
                    "left": "28%",
                    "top": "45%"
                  },
                  "type": "state-label"
                },
                {
                  "entity": "sensor.ensuite_temperature_rounded",
                  "style": {
                    "background": "center / contain no-repeat url(\"/local/nest.png\")",
                    "font-size": "12px",
                    "left": "93%",
                    "top": "44.7%"
                  },
                  "type": "state-label"
                }
              ],
              "image": "/local/FloorPlan_Upstairs.png",
              "type": "picture-elements"
            }
          ],
          "icon": "mdi:floor-plan",
          "panel": false,
          "path": "floorplan",
          "title": "Floorplan"
        },
        {
          "badges": [],
          "cards": [
            {
              "entity": "media_player.lenovosmartclock9603",
              "type": "media-control"
            },
            {
              "type": "media-control",
              "entity": "media_player.bedroom_2_speaker"
            },
            {
              "entity": "media_player.hallway_home",
              "type": "media-control"
            },
            {
              "entity": "media_player.kitchen_display",
              "type": "media-control"
            },
            {
              "entity": "media_player.kitchen_chromecast",
              "type": "media-control"
            },
            {
              "entity": "media_player.seb_s_home",
              "type": "media-control"
            },
            {
              "entity": "media_player.living_room_display",
              "type": "media-control"
            },
            {
              "entity": "media_player.downstairs",
              "type": "media-control"
            },
            {
              "type": "media-control",
              "entity": "media_player.reuben_s_room_speaker"
            },
            {
              "entity": "media_player.everywhere_except_lounge",
              "type": "media-control"
            },
            {
              "entity": "media_player.living_room_tv",
              "type": "media-control"
            },
            {
              "entity": "media_player.living_room_amp",
              "type": "media-control"
            },
            {
              "entity": "media_player.whole_house",
              "type": "media-control"
            },
            {
              "type": "media-control",
              "entity": "media_player.halo"
            }
          ],
          "icon": "mdi:google-assistant",
          "path": "google",
          "title": "Google"
        },
        {
          "icon": "mdi:history",
          "panel": false,
          "path": "history",
          "title": "History",
          "badges": [],
          "cards": [
            {
              "entities": [
                {
                  "entity": "sensor.seb_d1_temperature"
                },
                {
                  "entity": "sensor.reu_d1_temperature"
                },
                {
                  "entity": "sensor.bathroom_climate_temperature"
                },
                {
                  "entity": "sensor.ensuite_climate_temperature"
                },
                {
                  "entity": "sensor.hallway_motion_sensor_temperature_rounded"
                },
                {
                  "entity": "sensor.bed1_temperature"
                },
                {
                  "entity": "sensor.bed1_humidity"
                },
                {
                  "entity": "sensor.living_room_humidity"
                },
                {
                  "entity": "sensor.bathroom_climate_temperature"
                },
                {
                  "entity": "sensor.ensuite_climate_humidity"
                },
                {
                  "entity": "sensor.office_climate_temperature"
                },
                {
                  "entity": "sensor.hue_motion_sensor_temperature"
                },
                {
                  "entity": "sensor.kitchen_climate_humidity"
                },
                {
                  "entity": "sensor.office_climate_humidity"
                }
              ],
              "hours_to_show": 48,
              "refresh_interval": 0,
              "title": "Temp & Humidity (48h)",
              "type": "history-graph"
            },
            {
              "type": "history-graph",
              "entities": [
                {
                  "entity": "light.living_room_lights"
                },
                {
                  "entity": "light.hallway"
                }
              ],
              "hours_to_show": 168,
              "refresh_interval": 0
            }
          ]
        },
        {
          "badges": [],
          "cards": [
            {
              "cards": [
                {
                  "cards": [
                    {
                      "entity": "light.xmas_tree",
                      "type": "entity-button",
                      "icon": "mdi:pine-tree"
                    },
                    {
                      "entity": "light.christmas_star",
                      "type": "entity-button"
                    },
                    {
                      "entity": "light.advent",
                      "type": "entity-button",
                      "icon": "mdi:greenhouse"
                    }
                  ],
                  "type": "horizontal-stack"
                }
              ],
              "type": "vertical-stack"
            },
            {
              "entities": [
                "sensor.shipley_to_bradford",
                "sensor.shipley_to_leeds"
              ],
              "title": "Commute",
              "type": "custom:travel-time-card"
            },
            {
              "entity": "input_number.diffuser_delay",
              "type": "entity"
            }
          ],
          "icon": "mdi:archive",
          "path": "archived",
          "title": "Archived"
        },
        {
          "views": null,
          "cards": [
            {
              "cards": null,
              "entities": [
                {
                  "entity": "sensor.octoprint_current_state",
                  "name": "Status"
                },
                {
                  "entity": "sensor.octoprint_start_time",
                  "name": "Started"
                },
                {
                  "entity": "sensor.octoprint_estimated_finish_time",
                  "name": "ETA"
                }
              ],
              "type": "glance"
            },
            {
              "show_state": false,
              "show_name": false,
              "camera_view": "live",
              "type": "picture-entity",
              "entity": "camera.octoprint_camera"
            }
          ],
          "icon": "mdi:printer-3d",
          "path": "printer",
          "title": "3DPrinter"
        },
        {
          "badges": [],
          "cards": [
            {
              "entities": [
                {
                  "entity": "sensor.pi_hole_ads_blocked_today"
                }
              ],
              "show": {
                "graph": "line"
              },
              "type": "custom:mini-graph-card",
              "icon": "mdi:advertisements-off",
              "points_per_hour": 10,
              "smoothing": true,
              "line_width": 2,
              "name": "Ads blocked (24h)"
            },
            {
              "type": "custom:mini-graph-card",
              "entities": [
                {
                  "entity": "sensor.broadband_mb_received"
                }
              ],
              "points_per_hour": 1,
              "unit": "GB",
              "icon": "mdi:download",
              "name": "Data Received (last 24h)",
              "show": {
                "graph": "bar"
              }
            },
            {
              "type": "grid",
              "cards": [
                {
                  "type": "gauge",
                  "entity": "sensor.speedtest_download",
                  "min": 0,
                  "max": 72,
                  "severity": {
                    "green": 50,
                    "yellow": 30,
                    "red": 0
                  },
                  "name": "Download",
                  "needle": true
                },
                {
                  "type": "gauge",
                  "entity": "sensor.speedtest_upload",
                  "min": 0,
                  "max": 25,
                  "severity": {
                    "green": 15,
                    "yellow": 10,
                    "red": 0
                  },
                  "name": "Upload",
                  "needle": true
                },
                {
                  "type": "gauge",
                  "entity": "sensor.speedtest_ping",
                  "min": 0,
                  "max": 50,
                  "severity": {
                    "green": 0,
                    "yellow": 15,
                    "red": 25
                  },
                  "name": "Ping",
                  "needle": true
                }
              ]
            },
            {
              "type": "custom:mini-graph-card",
              "entities": [
                {
                  "entity": "sensor.speedtest_download",
                  "name": "Download"
                },
                {
                  "entity": "sensor.speedtest_upload",
                  "name": "Upload"
                },
                {
                  "entity": "sensor.speedtest_ping",
                  "name": "Ping",
                  "y_axis": "secondary"
                }
              ],
              "points_per_hour": 30,
              "line_width": 2,
              "logarithmic": true,
              "name": "Bandwidth",
              "show": {
                "icon": true,
                "labels": true,
                "name": true,
                "legend": true
              }
            }
          ],
          "icon": "mdi:network",
          "path": "network",
          "title": "Network"
        },
        {
          "title": "OEPL",
          "path": "oepl",
          "icon": "mdi:tablet-dashboard",
          "badges": [],
          "cards": [
            {
              "type": "vertical-stack",
              "cards": [
                {
                  "name": "Coffee",
                  "template": "button-card-headers",
                  "type": "custom:button-card"
                },
                {
                  "type": "custom:mushroom-number-card",
                  "entity": "input_number.coffee_grind_setting_caf",
                  "icon": "",
                  "display_mode": ""
                },
                {
                  "type": "custom:mushroom-number-card",
                  "entity": "input_number.coffee_grind_setting_decaf"
                },
                {
                  "show_state": false,
                  "show_name": true,
                  "camera_view": "auto",
                  "type": "picture-entity",
                  "entity": "camera.coffee_grind_settings_content",
                  "hold_action": {
                    "action": "call-service",
                    "service": "automation.trigger",
                    "target": {
                      "entity_id": "automation.oepl_coffee_settings"
                    },
                    "data": {
                      "skip_condition": true
                    }
                  }
                }
              ]
            },
            {
              "type": "vertical-stack",
              "cards": [
                {
                  "name": "Custom Weather",
                  "template": "button-card-headers",
                  "type": "custom:button-card"
                },
                {
                  "show_state": false,
                  "show_name": true,
                  "camera_view": "auto",
                  "type": "picture-entity",
                  "entity": "camera.custom_weather_content",
                  "hold_action": {
                    "action": "call-service",
                    "service": "automation.trigger",
                    "target": {
                      "entity_id": "automation.oepl_custom_weather"
                    },
                    "data": {
                      "skip_condition": true
                    }
                  }
                }
              ]
            },
            {
              "type": "vertical-stack",
              "cards": [
                {
                  "name": "Energy Dashboard",
                  "template": "button-card-headers",
                  "type": "custom:button-card"
                },
                {
                  "show_state": false,
                  "show_name": true,
                  "camera_view": "auto",
                  "type": "picture-entity",
                  "entity": "camera.energy_dashboard_content",
                  "hold_action": {
                    "action": "call-service",
                    "service": "automation.trigger",
                    "target": {
                      "entity_id": "automation.oepl_energy_dashboard"
                    },
                    "data": {
                      "skip_condition": true
                    }
                  }
                }
              ]
            },
            {
              "type": "vertical-stack",
              "cards": [
                {
                  "name": "Family Calendar",
                  "template": "button-card-headers",
                  "type": "custom:button-card"
                },
                {
                  "show_state": false,
                  "show_name": true,
                  "camera_view": "auto",
                  "type": "picture-entity",
                  "entity": "camera.family_calendar_content",
                  "hold_action": {
                    "action": "call-service",
                    "service": "automation.trigger",
                    "target": {
                      "entity_id": "automation.oepl_family_calendar"
                    },
                    "data": {
                      "skip_condition": true
                    }
                  }
                }
              ]
            },
            {
              "type": "vertical-stack",
              "cards": [
                {
                  "name": "Electricity Tariff",
                  "template": "button-card-headers",
                  "type": "custom:button-card"
                },
                {
                  "show_state": false,
                  "show_name": true,
                  "camera_view": "auto",
                  "type": "picture-entity",
                  "entity": "camera.electricity_tariff_content",
                  "hold_action": {
                    "action": "call-service",
                    "service": "automation.trigger",
                    "target": {
                      "entity_id": "automation.oepl_electricity_tariff"
                    },
                    "data": {
                      "skip_condition": true
                    }
                  }
                }
              ]
            }
          ]
        },
        {
          "badges": [],
          "cards": [
            {
              "type": "custom:auto-entities",
              "card": {
                "type": "entities",
                "title": "Low Battery Warning"
              },
              "filter": {
                "include": [
                  {
                    "domain": "sensor",
                    "attributes": {
                      "device_class": "battery"
                    },
                    "state": "< 25"
                  }
                ]
              }
            },
            {
              "type": "entities",
              "entities": [
                {
                  "entity": "input_boolean.prevent_deep_sleep"
                },
                {
                  "entity": "button.esp32_epaper_restart"
                },
                {
                  "entity": "button.epaper_t5_restart"
                },
                {
                  "entity": "input_select.epaper_page"
                },
                {
                  "entity": "automation.washer_notify_done",
                  "name": "Washing machine reminders",
                  "icon": "mdi:washing-machine"
                },
                {
                  "entity": "input_boolean.holiday_mode",
                  "name": "Holiday mode"
                }
              ]
            },
            {
              "type": "entity",
              "entity": "input_boolean.holiday_mode",
              "name": "Holiday Mode",
              "state_color": true
            },
            {
              "type": "entities",
              "entities": [
                {
                  "entity": "light.wled_matrix"
                },
                {
                  "entity": "input_text.matrix_text"
                }
              ],
              "title": "WLED Matrix",
              "show_header_toggle": false,
              "state_color": true,
              "footer": {
                "type": "buttons",
                "entities": [
                  {
                    "entity": "automation.matrix_default",
                    "name": "Default",
                    "icon": "mdi:format-clear",
                    "tap_action": {
                      "action": "call-service",
                      "service": "automation.trigger",
                      "service_data": {
                        "entity_id": "automation.matrix_default"
                      }
                    }
                  },
                  {
                    "entity": "automation.matrix_set_text",
                    "name": "Set text",
                    "icon": "mdi:cursor-text",
                    "tap_action": {
                      "action": "call-service",
                      "service": "automation.trigger",
                      "service_data": {
                        "entity_id": "automation.matrix_set_text"
                      }
                    }
                  },
                  {
                    "entity": "automation.matrix_music_artist",
                    "name": "Music",
                    "icon": "mdi:music",
                    "tap_action": {
                      "action": "call-service",
                      "service": "automation.trigger",
                      "service_data": {
                        "entity_id": "automation.matrix_music_artist"
                      }
                    }
                  }
                ]
              }
            },
            {
              "type": "entities",
              "entities": [
                "input_number.office_window_brightness_threshold",
                "input_number.office_window_blind_shade_percent",
                {
                  "entity": "sensor.cactus_illuminance",
                  "name": "Current brightness"
                },
                {
                  "type": "attribute",
                  "entity": "sun.sun",
                  "attribute": "azimuth",
                  "name": "Sun azimuth",
                  "suffix": "⁰"
                }
              ],
              "title": "Office Window"
            },
            {
              "type": "entities",
              "entities": [
                {
                  "entity": "input_boolean.heated_airer"
                },
                {
                  "entity": "switch.heated_airer"
                },
                {
                  "entity": "input_boolean.heated_airer_solar_override"
                },
                {
                  "type": "custom:template-entity-row",
                  "state": "{{ as_timestamp(states('sensor.airer_requested_power')) | timestamp_custom('%d/%m/%y %H:%M')}}",
                  "icon": "mdi:clock-check",
                  "name": "Requested power"
                },
                {
                  "entity": "sensor.airer_run_time",
                  "name": "Cumulative run time",
                  "icon": "mdi:timelapse"
                },
                {
                  "entity": "sensor.solar_excess"
                }
              ],
              "title": "Heated Airer",
              "show_header_toggle": false
            },
            {
              "type": "custom:apexcharts-card",
              "header": {
                "show": true,
                "title": "Weather Vs Solar",
                "show_states": true,
                "colorize_states": true
              },
              "graph_span": "1d",
              "span": {
                "start": "day"
              },
              "yaxis": [
                {
                  "id": "pv"
                },
                {
                  "id": "temp",
                  "opposite": true
                }
              ],
              "all_series_config": {
                "stroke_width": 2
              },
              "series": [
                {
                  "entity": "sensor.solcast_pv_forecast_forecast_today",
                  "yaxis_id": "pv",
                  "data_generator": "const data = [];\nentity.attributes.detailedForecast.forEach(forecast => data.push([forecast['period_start'],forecast['pv_estimate'] ] ));\nreturn data.reverse();\n",
                  "name": "Solar forecast"
                },
                {
                  "entity": "weather.forecast_home",
                  "yaxis_id": "temp",
                  "data_generator": "const data = [];\nentity.attributes.forecast_hourly.forEach(forecast => data.push([ forecast['datetime'],forecast['temperature'] ] ));\nreturn data.reverse();\n",
                  "type": "line",
                  "name": "Temperature forecast"
                }
              ]
            },
            {
              "type": "vertical-stack",
              "cards": [
                {
                  "name": "Coffee",
                  "template": "button-card-headers",
                  "type": "custom:button-card"
                },
                {
                  "type": "custom:mushroom-number-card",
                  "entity": "input_number.coffee_grind_setting_caf",
                  "icon": "",
                  "display_mode": ""
                },
                {
                  "type": "custom:mushroom-number-card",
                  "entity": "input_number.coffee_grind_setting_decaf"
                }
              ]
            },
            {
              "type": "vertical-stack",
              "cards": [
                {
                  "name": "Reuben's Tablets",
                  "template": "button-card-headers",
                  "type": "custom:button-card"
                },
                {
                  "type": "entity",
                  "entity": "counter.reuben_tablet",
                  "name": "Tablets remaining"
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "show_name": true,
                      "show_icon": true,
                      "type": "button",
                      "tap_action": {
                        "action": "call-service",
                        "service": "counter.decrement",
                        "target": {
                          "entity_id": [
                            "counter.reuben_tablet"
                          ]
                        }
                      },
                      "entity": "counter.reuben_tablet",
                      "icon": "mdi:numeric-negative-1",
                      "name": "Decrement"
                    },
                    {
                      "show_name": true,
                      "show_icon": true,
                      "type": "button",
                      "tap_action": {
                        "action": "call-service",
                        "service": "counter.reset",
                        "target": {
                          "entity_id": "counter.reuben_tablet"
                        }
                      },
                      "entity": "counter.reuben_tablet",
                      "icon": "mdi:restart",
                      "name": "Reset"
                    },
                    {
                      "show_name": true,
                      "show_icon": true,
                      "type": "button",
                      "tap_action": {
                        "action": "call-service",
                        "service": "counter.increment",
                        "target": {
                          "entity_id": "counter.reuben_tablet"
                        }
                      },
                      "entity": "counter.reuben_tablet",
                      "icon": "mdi:numeric-positive-1",
                      "name": "Increment"
                    }
                  ]
                }
              ]
            },
            {
              "type": "entities",
              "entities": [
                "binary_sensor.mmwave_living_room"
              ]
            }
          ],
          "icon": "mdi:beta",
          "path": "beta",
          "title": "Beta"
        },
        {
          "badges": [],
          "cards": [
            {
              "aspect_ratio": "0%",
              "camera_image": "camera.ip_webcam",
              "entities": [
                {
                  "entity": "camera.ip_webcam"
                },
                {
                  "entity": "sensor.ip_webcam_battery_level"
                },
                {
                  "entity": "switch.ip_webcam_front_facing_camera"
                },
                {
                  "entity": "sensor.ip_webcam_battery_voltage"
                }
              ],
              "image": "https://demo.home-assistant.io/stub_config/kitchen.png",
              "title": "Green Lane",
              "type": "picture-glance"
            },
            {
              "type": "picture-glance",
              "camera_image": "camera.officecam",
              "title": "OfficeCam",
              "aspect_ratio": "0%",
              "entities": [
                {
                  "entity": "camera.officecam"
                }
              ],
              "image": "https://demo.home-assistant.io/stub_config/kitchen.png"
            },
            {
              "aspect_ratio": "0%",
              "camera_image": "camera.esp32cam_lastimage",
              "entities": [
                {
                  "entity": "camera.esp32cam_one"
                },
                {
                  "entity": "input_text.image_timestamp"
                }
              ],
              "entity": "input_text.image_timestamp",
              "image": "c",
              "title": "ESP32Cam Last image",
              "type": "picture-glance"
            },
            {
              "type": "entities",
              "entities": [
                {
                  "type": "cast",
                  "name": "Cams",
                  "view": "webcam"
                }
              ],
              "title": "Cast"
            },
            {
              "camera_view": "auto",
              "type": "picture-glance",
              "title": "Octoprint",
              "entities": [
                {
                  "entity": "sensor.octoprint_current_state"
                },
                {
                  "entity": "sensor.octoprint_job_percentage"
                },
                {
                  "entity": "sensor.octoprint_estimated_finish_time"
                },
                {
                  "entity": "binary_sensor.octoprint_printing"
                }
              ],
              "camera_image": "camera.octoprint",
              "style": "hui-image {\n  transform: rotate(270deg);\n}\n"
            }
          ],
          "icon": "mdi:cctv",
          "path": "webcam",
          "title": "Webcam"
        },
        {
          "title": "NFC",
          "path": "nfc",
          "icon": "mdi:nfc",
          "badges": [],
          "cards": [
            {
              "type": "entities",
              "entities": [
                {
                  "entity": "light.tagreaderseb_led"
                },
                {
                  "entity": "switch.tagreaderseb_buzzer_enabled"
                },
                {
                  "entity": "switch.tagreaderseb_led_enabled"
                },
                {
                  "entity": "binary_sensor.tagreaderseb_status"
                }
              ],
              "title": "Seb's Tag Reader",
              "show_header_toggle": false,
              "state_color": true
            },
            {
              "type": "entities",
              "entities": [
                {
                  "entity": "light.tagreaderreu_led"
                },
                {
                  "entity": "switch.tagreaderreu_buzzer_enabled"
                },
                {
                  "entity": "switch.tagreaderreu_led_enabled"
                },
                {
                  "entity": "binary_sensor.tagreaderreu_status"
                }
              ],
              "title": "Reuben's Tag Reader",
              "show_header_toggle": false,
              "state_color": true
            }
          ]
        },
        {
          "title": "Rainfall",
          "path": "rainfall",
          "icon": "mdi:weather-rainy",
          "badges": [],
          "cards": [
            {
              "type": "entities",
              "entities": [
                {
                  "entities": [
                    {
                      "entity": "sensor.raingauge_tips",
                      "name": "Tips"
                    },
                    {
                      "entity": "sensor.rainfall_today",
                      "name": "Rainfall"
                    }
                  ],
                  "entity": "binary_sensor.rain_gauge",
                  "name": "Rainfall",
                  "secondary_info": "last-changed",
                  "state_color": true,
                  "type": "custom:multiple-entity-row"
                }
              ],
              "title": "Rainfall today",
              "icon": "mdi:weather-rainy"
            },
            {
              "type": "custom:mini-graph-card",
              "entities": [
                "sensor.rainfall_today"
              ],
              "hours_to_show": 24,
              "animate": true,
              "name": "Rainfall today",
              "points_per_hour": 6,
              "icon": "mdi:counter"
            },
            {
              "type": "custom:mini-graph-card",
              "entities": [
                "sensor.rainfall_today"
              ],
              "hours_to_show": 168,
              "aggregate_func": "last",
              "animate": true,
              "group_by": "date",
              "show": {
                "graph": "bar"
              },
              "icon": "mdi:calendar",
              "name": "Daily rainfall"
            },
            {
              "type": "custom:mini-graph-card",
              "card": null,
              "entities": [
                "sensor.raingauge_tips"
              ],
              "hours_to_show": 48,
              "animate": true,
              "name": "Rain gauge tips (48hrs)",
              "points_per_hour": 5,
              "icon": "mdi:scale-balance"
            }
          ]
        },
        {
          "title": "Podcasts",
          "path": "podcasts",
          "icon": "mdi:podcast",
          "badges": [],
          "cards": [
            {
              "type": "entities",
              "entities": [
                {
                  "type": "custom:template-entity-row",
                  "name": "Last podcast",
                  "state": "{{ strptime(state_attr('sensor.podcast_story_pirates','entries')[states('counter.podcast_story_pirates') | int + 1].published[:-2] + '2021', '%a, %b %d %H:%M %Y').timestamp() | timestamp_custom('%d %B')}}",
                  "secondary": "{{ state_attr('sensor.podcast_story_pirates','entries')[states('counter.podcast_story_pirates') | int +1].title }}"
                },
                {
                  "type": "custom:template-entity-row",
                  "name": "Next podcast",
                  "state": "{{ strptime(state_attr('sensor.podcast_story_pirates','entries')[states('counter.podcast_story_pirates') | int].published[:-2] + '2021', '%a, %b %d %H:%M %Y').timestamp() | timestamp_custom('%d %B')}}",
                  "secondary": "{{ state_attr('sensor.podcast_story_pirates','entries')[states('counter.podcast_story_pirates') | int].title }}"
                }
              ],
              "title": "Story Pirates",
              "show_header_toggle": false
            },
            {
              "type": "entities",
              "entities": [
                {
                  "type": "custom:template-entity-row",
                  "name": "Last podcast",
                  "state": "{{ strptime(state_attr('sensor.podcast_marvellous_musical','entries')[states('counter.podcast_marvellous_musical') | int + 1].published[:-2] + '2021', '%a, %b %d %H:%M %Y').timestamp() | timestamp_custom('%d %B')}}",
                  "secondary": "{{ state_attr('sensor.podcast_marvellous_musical','entries')[states('counter.podcast_marvellous_musical') | int +1].title }}"
                },
                {
                  "type": "custom:template-entity-row",
                  "name": "Next podcast",
                  "state": "{{ strptime(state_attr('sensor.podcast_marvellous_musical','entries')[states('counter.podcast_marvellous_musical') | int].published[:-2] + '2021', '%a, %b %d %H:%M %Y').timestamp() | timestamp_custom('%d %B')}}",
                  "secondary": "{{ state_attr('sensor.podcast_marvellous_musical','entries')[states('counter.podcast_marvellous_musical') | int].title }}"
                }
              ],
              "title": "Marvellous Musical",
              "show_header_toggle": false
            },
            {
              "type": "entities",
              "entities": [
                {
                  "type": "custom:template-entity-row",
                  "name": "Last podcast",
                  "state": "{{ strptime(state_attr('sensor.podcast_peace_out','entries')[states('counter.podcast_peace_out') | int + 1].published[:-2] + '2021', '%a, %b %d %H:%M %Y').timestamp() | timestamp_custom('%d %B')}}",
                  "secondary": "{{ state_attr('sensor.podcast_peace_out','entries')[states('counter.podcast_peace_out') | int +1].title }}"
                },
                {
                  "type": "custom:template-entity-row",
                  "name": "Next podcast",
                  "state": "{{ strptime(state_attr('sensor.podcast_peace_out','entries')[states('counter.podcast_peace_out') | int].published[:-2] + '2021', '%a, %b %d %H:%M %Y').timestamp() | timestamp_custom('%d %B')}}",
                  "secondary": "{{ state_attr('sensor.podcast_peace_out','entries')[states('counter.podcast_peace_out') | int].title }}"
                }
              ],
              "title": "Peace Out",
              "show_header_toggle": false
            },
            {
              "type": "entities",
              "entities": [
                {
                  "type": "custom:template-entity-row",
                  "name": "Last podcast",
                  "state": "{{ strptime(state_attr('sensor.podcast_goodnight_stories','entries')[states('counter.podcast_goodnight_stories') | int + 1].published[:-2] + '2021', '%a, %b %d %H:%M %Y').timestamp() | timestamp_custom('%d %B')}}",
                  "secondary": "{{ state_attr('sensor.podcast_goodnight_stories','entries')[states('counter.podcast_goodnight_stories') | int +1].title }}"
                },
                {
                  "type": "custom:template-entity-row",
                  "name": "Next podcast",
                  "state": "{{ strptime(state_attr('sensor.podcast_goodnight_stories','entries')[states('counter.podcast_goodnight_stories') | int].published[:-2] + '2021', '%a, %b %d %H:%M %Y').timestamp() | timestamp_custom('%d %B')}}",
                  "secondary": "{{ state_attr('sensor.podcast_goodnight_stories','entries')[states('counter.podcast_goodnight_stories') | int].title }}"
                }
              ],
              "title": "Goodnight Stories",
              "show_header_toggle": false
            },
            {
              "type": "entities",
              "entities": [
                {
                  "type": "custom:template-entity-row",
                  "name": "Last podcast",
                  "state": "{{ strptime(state_attr('sensor.podcast_sound_explorers','entries')[states('counter.podcast_maddie_s_sound_explorers') | int + 1].published[:-2] + '2021', '%a, %b %d %H:%M %Y').timestamp() | timestamp_custom('%d %B')}}",
                  "secondary": "{{ state_attr('sensor.podcast_sound_explorers','entries')[states('counter.podcast_maddie_s_sound_explorers') | int +1].title }}"
                },
                {
                  "type": "custom:template-entity-row",
                  "name": "Next podcast",
                  "state": "{{ strptime(state_attr('sensor.podcast_sound_explorers','entries')[states('counter.podcast_maddie_s_sound_explorers') | int].published[:-2] + '2021', '%a, %b %d %H:%M %Y').timestamp() | timestamp_custom('%d %B')}}",
                  "secondary": "{{ state_attr('sensor.podcast_sound_explorers','entries')[states('counter.podcast_maddie_s_sound_explorers') | int].title }}"
                }
              ],
              "title": "Maddie's Sound Explorers",
              "show_header_toggle": false
            },
            {
              "type": "entities",
              "entities": [
                {
                  "type": "custom:template-entity-row",
                  "name": "Last podcast",
                  "state": "{{ strptime(state_attr('sensor.podcast_but_why','entries')[states('counter.podcast_but_why') | int + 1].published[:-2] + '2021', '%a, %b %d %H:%M %Y').timestamp() | timestamp_custom('%d %B')}}",
                  "secondary": "{{ state_attr('sensor.podcast_but_why','entries')[states('counter.podcast_but_why') | int +1].title }}"
                },
                {
                  "type": "custom:template-entity-row",
                  "name": "Next podcast",
                  "state": "{{ strptime(state_attr('sensor.podcast_but_why','entries')[states('counter.podcast_but_why') | int].published[:-2] + '2021', '%a, %b %d %H:%M %Y').timestamp() | timestamp_custom('%d %B')}}",
                  "secondary": "{{ state_attr('sensor.podcast_but_why','entries')[states('counter.podcast_but_why') | int].title }}"
                }
              ],
              "title": "But Why",
              "show_header_toggle": false
            },
            {
              "type": "entities",
              "entities": [
                {
                  "type": "custom:template-entity-row",
                  "name": "Last podcast",
                  "state": "{{ strptime(state_attr('sensor.podcast_finn_caspian','entries')[states('counter.podcast_finn_caspian') | int + 1].published[:-2] + '2021', '%a, %b %d %H:%M %Y').timestamp() | timestamp_custom('%d %B')}}",
                  "secondary": "{{ state_attr('sensor.podcast_finn_caspian','entries')[states('counter.podcast_finn_caspian') | int +1].title }}"
                },
                {
                  "type": "custom:template-entity-row",
                  "name": "Next podcast",
                  "state": "{{ strptime(state_attr('sensor.podcast_finn_caspian','entries')[states('counter.podcast_finn_caspian') | int].published[:-2] + '2021', '%a, %b %d %H:%M %Y').timestamp() | timestamp_custom('%d %B')}}",
                  "secondary": "{{ state_attr('sensor.podcast_finn_caspian','entries')[states('counter.podcast_finn_caspian') | int].title }}"
                }
              ],
              "title": "Finn Caspian",
              "show_header_toggle": false
            },
            {
              "type": "entities",
              "entities": [
                {
                  "type": "custom:template-entity-row",
                  "name": "Last podcast",
                  "state": "{{ strptime(state_attr('sensor.podcast_stories','entries')[states('counter.podcast_stories') | int + 1].published[:-2] + '2021', '%a, %b %d %H:%M %Y').timestamp() | timestamp_custom('%d %B')}}",
                  "secondary": "{{ state_attr('sensor.podcast_stories','entries')[states('counter.podcast_stories') | int +1].title }}"
                },
                {
                  "type": "custom:template-entity-row",
                  "name": "Next podcast",
                  "state": "{{ strptime(state_attr('sensor.podcast_stories','entries')[states('counter.podcast_stories') | int].published[:-2] + '2021', '%a, %b %d %H:%M %Y').timestamp() | timestamp_custom('%d %B')}}",
                  "secondary": "{{ state_attr('sensor.podcast_stories','entries')[states('counter.podcast_stories') | int].title }}"
                }
              ],
              "title": "Stories Podcast",
              "show_header_toggle": false
            },
            {
              "type": "entities",
              "entities": [
                {
                  "type": "custom:template-entity-row",
                  "name": "Last podcast",
                  "state": "{{ strptime(state_attr('sensor.podcast_girl_tales','entries')[states('counter.podcast_girl_tales') | int + 1].published[:-2] + '2021', '%a, %b %d %H:%M %Y').timestamp() | timestamp_custom('%d %B')}}",
                  "secondary": "{{ state_attr('sensor.podcast_girl_tales','entries')[states('counter.podcast_girl_tales') | int +1].title }}"
                },
                {
                  "type": "custom:template-entity-row",
                  "name": "Next podcast",
                  "state": "{{ strptime(state_attr('sensor.podcast_girl_tales','entries')[states('counter.podcast_girl_tales') | int].published[:-2] + '2021', '%a, %b %d %H:%M %Y').timestamp() | timestamp_custom('%d %B')}}",
                  "secondary": "{{ state_attr('sensor.podcast_girl_tales','entries')[states('counter.podcast_girl_tales') | int].title }}"
                }
              ],
              "title": "Girl Tales",
              "show_header_toggle": false
            },
            {
              "type": "entities",
              "entities": [
                {
                  "type": "custom:template-entity-row",
                  "name": "Last podcast",
                  "state": "{{ strptime(state_attr('sensor.podcast_brains_on','entries')[states('counter.podcast_brains_on') | int + 1].published[:-2] + '2021', '%a, %b %d %H:%M %Y').timestamp() | timestamp_custom('%d %B')}}",
                  "secondary": "{{ state_attr('sensor.podcast_brains_on','entries')[states('counter.podcast_brains_on') | int +1].title }}"
                },
                {
                  "type": "custom:template-entity-row",
                  "name": "Next podcast",
                  "state": "{{ strptime(state_attr('sensor.podcast_brains_on','entries')[states('counter.podcast_brains_on') | int].published[:-2] + '2021', '%a, %b %d %H:%M %Y').timestamp() | timestamp_custom('%d %B')}}",
                  "secondary": "{{ state_attr('sensor.podcast_brains_on','entries')[states('counter.podcast_brains_on') | int].title }}"
                }
              ],
              "title": "Brains On",
              "show_header_toggle": false
            }
          ]
        },
        {
          "title": "Waste Collection",
          "path": "waste-collection",
          "icon": "mdi:recycle",
          "badges": [],
          "cards": [
            {
              "type": "vertical-stack",
              "cards": [
                {
                  "name": "Waste collection",
                  "template": "button-card-headers",
                  "type": "custom:button-card"
                },
                {
                  "type": "entities",
                  "entities": [
                    {
                      "type": "custom:template-entity-row",
                      "name": "Recycling",
                      "state": "{{ ((as_timestamp(state_attr('calendar.recycling', 'start_time')) - as_timestamp(now())) | int /60/1440) | round(0) }} days",
                      "secondary": "{{as_timestamp(state_attr('calendar.recycling', 'start_time')) | timestamp_custom('%d %B %Y')}}",
                      "icon": "mdi:recycle"
                    },
                    {
                      "type": "custom:template-entity-row",
                      "name": "General waste",
                      "state": "{{ ((as_timestamp(state_attr('calendar.regular', 'start_time')) - as_timestamp(now())) | int /60/1440) | round(0) }} days",
                      "secondary": "{{as_timestamp(state_attr('calendar.regular', 'start_time')) | timestamp_custom('%d %B %Y')}}",
                      "icon": "mdi:trash-can"
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "theme": "Backend-selected",
          "title": "Office",
          "path": "office",
          "icon": "mdi:desk",
          "subview": true,
          "badges": [],
          "cards": [
            {
              "cards": [
                {
                  "name": "Office",
                  "template": "button-card-headers",
                  "type": "custom:button-card"
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "custom:mushroom-entity-card",
                      "entity": "switch.toms_desk",
                      "secondary_info": "last-changed",
                      "tap_action": {
                        "action": "toggle"
                      },
                      "hold_action": {
                        "action": "more-info"
                      },
                      "icon_color": "green"
                    },
                    {
                      "type": "custom:mushroom-entity-card",
                      "entity": "switch.annas_desk",
                      "secondary_info": "last-changed",
                      "tap_action": {
                        "action": "toggle"
                      },
                      "hold_action": {
                        "action": "more-info"
                      },
                      "icon_color": "green"
                    }
                  ]
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "features": [
                        {
                          "type": "light-brightness"
                        }
                      ],
                      "type": "tile",
                      "entity": "light.second_bedroom_ceiling",
                      "tap_action": {
                        "action": "toggle"
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "light.annas_desk",
                          "state_not": "unavailable"
                        }
                      ],
                      "card": {
                        "type": "tile",
                        "entity": "light.annas_desk",
                        "tap_action": {
                          "action": "toggle"
                        },
                        "features": [
                          {
                            "type": "light-brightness"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "tile",
                      "entity": "light.toms_desk_master",
                      "tap_action": {
                        "action": "toggle"
                      }
                    },
                    {
                      "color": "accent",
                      "type": "tile",
                      "entity": "switch.toms_monitor_light",
                      "tap_action": {
                        "action": "toggle"
                      }
                    }
                  ]
                },
                {
                  "type": "custom:mushroom-cover-card",
                  "entity": "cover.office_blind",
                  "show_position_control": true,
                  "show_buttons_control": false
                },
                {
                  "cards": [
                    {
                      "type": "custom:card-templater",
                      "entities": [
                        "sensor.temps_min_stats",
                        "sensor.temps_max_stats"
                      ],
                      "card": {
                        "color_thresholds": [
                          {
                            "value_template": "{{ states(\"sensor.temps_min_stats\")|float - states(\"sensor.temps_min_stats\")|float }}",
                            "color_template": "{{ states(\"input_text.colour_low\")}}"
                          },
                          {
                            "value_template": "{{ states(\"sensor.temps_min_stats\")|float }}",
                            "color_template": "{{ states(\"input_text.colour_medium_low\")}}"
                          },
                          {
                            "value_template": "{{ (states(\"sensor.temps_min_stats\")|float +  states(\"sensor.temps_max_stats\")|float)/2 }}",
                            "color_template": "{{ states(\"input_text.colour_medium\")}}"
                          },
                          {
                            "value_template": "{{ states(\"sensor.temps_max_stats\")|float }}",
                            "color_template": "{{ states(\"input_text.colour_medium_high\")}}"
                          },
                          {
                            "value_template": "{{ states(\"sensor.temps_max_stats\")|float - states(\"sensor.temps_max_stats\")|float }}",
                            "color_template": "{{ states(\"input_text.colour_high\")}}"
                          }
                        ],
                        "entities": [
                          {
                            "entity": "sensor.office_climate_temperature",
                            "index": 0,
                            "name": "Temp",
                            "show_fill": false
                          },
                          {
                            "entity": "climate.hive_thermostat",
                            "attribute": "hvac_action",
                            "y_axis": "secondary",
                            "color": "grey",
                            "name": "Heating",
                            "show_fill": true,
                            "show_line": false,
                            "smoothing": false,
                            "show_state": true
                          },
                          {
                            "entity": "sensor.daytime",
                            "y_axis": "secondary",
                            "color": "orange",
                            "name": "Day/Night",
                            "show_fill": true,
                            "show_line": false,
                            "smoothing": false,
                            "show_state": false
                          }
                        ],
                        "state_map": [
                          {
                            "label": "Idle",
                            "value": "idle"
                          },
                          {
                            "label": "Heating",
                            "value": "heating"
                          }
                        ],
                        "points_per_hour": 20,
                        "hours_to_show_template": "{{96 if states('input_boolean.extended_history')=='on' else 24}}",
                        "line_width": 2,
                        "show": {
                          "icon": false,
                          "labels": true,
                          "name": false
                        },
                        "type": "custom:mini-graph-card"
                      }
                    }
                  ],
                  "type": "horizontal-stack"
                },
                {
                  "type": "plant-status",
                  "entity": "plant.cactus",
                  "name": "Cactus"
                }
              ],
              "type": "vertical-stack"
            }
          ]
        },
        {
          "theme": "Backend-selected",
          "title": "Living room",
          "path": "living-room",
          "subview": true,
          "icon": "mdi:sofa",
          "badges": [],
          "cards": [
            {
              "cards": [
                {
                  "card": null,
                  "name": "Living Room",
                  "template": "button-card-headers",
                  "type": "custom:button-card"
                },
                {
                  "type": "custom:mushroom-light-card",
                  "entity": "light.living_room_ceiling",
                  "use_light_color": false,
                  "show_brightness_control": true
                },
                {
                  "type": "custom:mushroom-light-card",
                  "entity": "light.living_room_1",
                  "use_light_color": true,
                  "show_brightness_control": true,
                  "show_color_temp_control": true,
                  "show_color_control": true,
                  "collapsible_controls": false
                },
                {
                  "type": "custom:mushroom-light-card",
                  "entity": "light.living_room_2",
                  "use_light_color": true,
                  "show_brightness_control": true,
                  "show_color_temp_control": true,
                  "show_color_control": true,
                  "collapsible_controls": false
                },
                {
                  "type": "custom:mushroom-light-card",
                  "entity": "light.solar_lamp",
                  "use_light_color": true,
                  "show_brightness_control": true,
                  "show_color_temp_control": true,
                  "show_color_control": true,
                  "collapsible_controls": true
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "custom:mushroom-light-card",
                      "entity": "light.tv_backlight",
                      "use_light_color": true,
                      "show_brightness_control": true,
                      "show_color_temp_control": true,
                      "show_color_control": true,
                      "collapsible_controls": true
                    },
                    {
                      "type": "custom:mushroom-entity-card",
                      "name": "Kodi",
                      "entity": "switch.media_centre"
                    }
                  ]
                },
                {
                  "type": "thermostat",
                  "entity": "climate.hive_thermostat",
                  "show_current_as_primary": true,
                  "features": [
                    {
                      "style": "icons",
                      "preset_modes": [
                        "boost",
                        "none"
                      ],
                      "type": "climate-preset-modes"
                    }
                  ],
                  "name": "Hive"
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "tile",
                      "entity": "climate.hive_thermostat"
                    },
                    {
                      "type": "tile",
                      "entity": "binary_sensor.living_room_door"
                    }
                  ]
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "input_boolean.xmas_mode",
                      "state": "on"
                    }
                  ],
                  "card": {
                    "type": "horizontal-stack",
                    "cards": [
                      {
                        "show_name": true,
                        "show_icon": true,
                        "type": "button",
                        "tap_action": {
                          "action": "toggle"
                        },
                        "entity": "light.xmas_tree"
                      },
                      {
                        "entity": "light.christmas_star",
                        "type": "button"
                      }
                    ]
                  }
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "input_boolean.xmas_mode",
                          "state": "on"
                        }
                      ],
                      "card": {
                        "type": "button",
                        "tap_action": {
                          "action": "toggle"
                        },
                        "entity": "light.window"
                      }
                    },
                    {
                      "type": "custom:card-templater",
                      "entities": [
                        "sensor.temps_min_stats",
                        "sensor.temps_max_stats"
                      ],
                      "card": {
                        "color_thresholds": [
                          {
                            "value_template": "{{ states(\"sensor.temps_min_stats\")|float - states(\"sensor.temps_min_stats\")|float }}",
                            "color_template": "{{ states(\"input_text.colour_low\")}}"
                          },
                          {
                            "value_template": "{{ states(\"sensor.temps_min_stats\")|float }}",
                            "color_template": "{{ states(\"input_text.colour_medium_low\")}}"
                          },
                          {
                            "value_template": "{{ (states(\"sensor.temps_min_stats\")|float +  states(\"sensor.temps_max_stats\")|float)/2 }}",
                            "color_template": "{{ states(\"input_text.colour_medium\")}}"
                          },
                          {
                            "value_template": "{{ states(\"sensor.temps_max_stats\")|float }}",
                            "color_template": "{{ states(\"input_text.colour_medium_high\")}}"
                          },
                          {
                            "value_template": "{{ states(\"sensor.temps_max_stats\")|float - states(\"sensor.temps_max_stats\")|float }}",
                            "color_template": "{{ states(\"input_text.colour_high\")}}"
                          }
                        ],
                        "entities": [
                          {
                            "entity": "climate.hive_thermostat",
                            "attribute": "current_temperature",
                            "name": "Hive Temp",
                            "show_fill": false,
                            "show_line": false,
                            "smoothing": false,
                            "show_state": true
                          },
                          {
                            "entity": "climate.hive_thermostat",
                            "attribute": "temperature",
                            "index": 0,
                            "name": "Target",
                            "color": "lightblue",
                            "show_fill": false
                          },
                          {
                            "entity": "sensor.daytime",
                            "y_axis": "secondary",
                            "color": "orange",
                            "name": "Day/Night",
                            "show_fill": true,
                            "show_line": false,
                            "smoothing": false,
                            "show_state": false
                          },
                          {
                            "entity": "sensor.living_room_temp",
                            "index": 0,
                            "name": "D1Temp",
                            "show_fill": false
                          },
                          {
                            "entity": "climate.hive_thermostat",
                            "attribute": "hvac_action",
                            "y_axis": "secondary",
                            "color": "grey",
                            "name": "Heating",
                            "show_fill": true,
                            "show_line": false,
                            "smoothing": false,
                            "show_state": true
                          }
                        ],
                        "state_map": [
                          {
                            "label": "Idle",
                            "value": "idle"
                          },
                          {
                            "label": "Heating",
                            "value": "heating"
                          }
                        ],
                        "name": "Living room",
                        "points_per_hour": 20,
                        "hours_to_show_template": "{{96 if states('input_boolean.extended_history')=='on' else 24}}",
                        "line_width": 2,
                        "lower_bound": 10,
                        "show": {
                          "icon": false,
                          "labels": true,
                          "name": false
                        },
                        "type": "custom:mini-graph-card"
                      }
                    }
                  ]
                },
                {
                  "type": "custom:mushroom-chips-card",
                  "chips": [
                    {
                      "type": "entity",
                      "entity": "input_boolean.extended_history",
                      "name": "Extended Hitory",
                      "tap_action": {
                        "action": "toggle"
                      },
                      "hold_action": {
                        "action": "toggle"
                      }
                    },
                    {
                      "type": "entity",
                      "entity": "binary_sensor.lumi_lumi_sensor_motion_aq2_occupancy"
                    }
                  ]
                },
                {
                  "type": "entity",
                  "entity": "input_boolean.living_room_occupancy",
                  "state_color": true
                }
              ],
              "type": "vertical-stack"
            }
          ]
        },
        {
          "theme": "Backend-selected",
          "subview": true,
          "title": "Main bedroom",
          "path": "main-bedroom",
          "icon": "mdi:bed-king",
          "badges": [],
          "cards": [
            {
              "cards": [
                {
                  "name": "Master Bedroom",
                  "template": "button-card-headers",
                  "type": "custom:button-card"
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "tile",
                      "entity": "light.main_bedroom_ceiling",
                      "tap_action": {
                        "action": "toggle"
                      },
                      "features": [
                        {
                          "type": "light-brightness"
                        }
                      ]
                    },
                    {
                      "type": "custom:mushroom-light-card",
                      "entity": "light.main_bedroom_bloom",
                      "use_light_color": true,
                      "show_brightness_control": true,
                      "show_color_temp_control": true,
                      "show_color_control": true,
                      "collapsible_controls": false
                    }
                  ]
                },
                {
                  "type": "vertical-stack",
                  "cards": [
                    {
                      "type": "custom:mushroom-cover-card",
                      "entity": "cover.large_blind",
                      "show_position_control": true,
                      "show_buttons_control": false
                    },
                    {
                      "type": "custom:mushroom-cover-card",
                      "entity": "cover.small_blind",
                      "show_position_control": true
                    }
                  ]
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "custom:mushroom-template-card",
                      "entity": "switch.toms_phone_charger",
                      "icon": "{% if is_state('switch.toms_phone_charger','on')  %}\n  {{'mdi:cellphone-charging'}}\n{% else %}\n  {{'mdi:cellphone'}}\n{% endif %}",
                      "tap_action": {
                        "action": "toggle"
                      },
                      "primary": "Tom's Charger",
                      "secondary": "{{relative_time(states.switch.toms_phone_charger.last_changed)}} ago",
                      "icon_color": "{% if is_state('switch.toms_phone_charger','on')  %}\n  {{'green'}}\n{% endif %}"
                    },
                    {
                      "type": "custom:mushroom-template-card",
                      "entity": "switch.annas_phone_charger",
                      "icon": "{% if is_state('switch.annas_phone_charger','on')  %}\n  {{'mdi:cellphone-charging'}}\n{% else %}\n  {{'mdi:cellphone'}}\n{% endif %}",
                      "tap_action": {
                        "action": "toggle"
                      },
                      "primary": "Anna's Charger",
                      "secondary": "{{relative_time(states.switch.annas_phone_charger.last_changed)}} ago",
                      "icon_color": "{% if is_state('switch.annas_phone_charger','on')  %}\n  {{'green'}}\n{% endif %}"
                    }
                  ]
                },
                {
                  "cards": [
                    {
                      "type": "tile",
                      "entity": "binary_sensor.main_bedroom_door",
                      "name": "Bedroom Door"
                    },
                    {
                      "entity": "switch.annas_watch_charger",
                      "type": "tile",
                      "icon": "",
                      "tap_action": {
                        "action": "toggle"
                      }
                    }
                  ],
                  "type": "horizontal-stack"
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "custom:card-templater",
                      "entities": [
                        "sensor.temps_min_stats",
                        "sensor.temps_max_stats"
                      ],
                      "card": {
                        "color_thresholds": [
                          {
                            "value_template": "{{ states(\"sensor.temps_min_stats\")|float - states(\"sensor.temps_min_stats\")|float }}",
                            "color_template": "{{ states(\"input_text.colour_low\")}}"
                          },
                          {
                            "value_template": "{{ states(\"sensor.temps_min_stats\")|float }}",
                            "color_template": "{{ states(\"input_text.colour_medium_low\")}}"
                          },
                          {
                            "value_template": "{{ (states(\"sensor.temps_min_stats\")|float +  states(\"sensor.temps_max_stats\")|float)/2 }}",
                            "color_template": "{{ states(\"input_text.colour_medium\")}}"
                          },
                          {
                            "value_template": "{{ states(\"sensor.temps_max_stats\")|float }}",
                            "color_template": "{{ states(\"input_text.colour_medium_high\")}}"
                          },
                          {
                            "value_template": "{{ states(\"sensor.temps_max_stats\")|float - states(\"sensor.temps_max_stats\")|float }}",
                            "color_template": "{{ states(\"input_text.colour_high\")}}"
                          }
                        ],
                        "entities": [
                          {
                            "entity": "climate.main_bedroom_radiator_thermostat",
                            "attribute": "current_temperature",
                            "index": 0,
                            "name": "Temp",
                            "show_fill": false,
                            "smoothing": false
                          },
                          {
                            "entity": "climate.hive_thermostat",
                            "attribute": "hvac_action",
                            "y_axis": "secondary",
                            "color": "grey",
                            "name": "Heating",
                            "show_fill": true,
                            "show_line": false,
                            "smoothing": false,
                            "show_state": true
                          },
                          {
                            "entity": "sensor.daytime",
                            "y_axis": "secondary",
                            "color": "orange",
                            "name": "Day/Night",
                            "show_fill": true,
                            "show_line": false,
                            "smoothing": false,
                            "show_state": false
                          },
                          {
                            "entity": "climate.main_bedroom_radiator_thermostat",
                            "attribute": "hvac_action",
                            "y_axis": "secondary",
                            "color": "blue",
                            "name": "Radiator",
                            "show_fill": true,
                            "show_line": false,
                            "smoothing": false,
                            "show_state": true
                          }
                        ],
                        "state_map": [
                          {
                            "label": "Idle",
                            "value": "idle"
                          },
                          {
                            "label": "Heating",
                            "value": "heating"
                          }
                        ],
                        "points_per_hour": 20,
                        "line_width": 2,
                        "name": "Main bedroom",
                        "show": {
                          "icon": false,
                          "labels": true,
                          "name": false
                        },
                        "type": "custom:mini-graph-card"
                      }
                    }
                  ]
                }
              ],
              "type": "vertical-stack"
            },
            {
              "type": "thermostat",
              "entity": "climate.main_bedroom_radiator_thermostat",
              "name": "Main Bedroom Radiator",
              "show_current_as_primary": true
            }
          ]
        },
        {
          "theme": "Backend-selected",
          "title": "Kitchen",
          "path": "kitchen",
          "subview": true,
          "icon": "mdi:stove",
          "badges": [],
          "cards": [
            {
              "cards": [
                {
                  "name": "Kitchen/Dining room",
                  "template": "button-card-headers",
                  "type": "custom:button-card",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/lovelace/kitchen"
                  }
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "condition": "state",
                      "entity": "media_player.kitchen_display",
                      "state": "playing"
                    }
                  ],
                  "card": {
                    "type": "media-control",
                    "entity": "media_player.kitchen_display"
                  }
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "tile",
                      "entity": "binary_sensor.fridge_door"
                    },
                    {
                      "type": "tile",
                      "entity": "binary_sensor.dishwasher"
                    },
                    {
                      "type": "custom:mushroom-entity-card",
                      "entity": "automation.notify_oven_hot",
                      "tap_action": {
                        "action": "toggle"
                      },
                      "name": "Oven alert",
                      "icon": "mdi:stove"
                    }
                  ]
                },
                {
                  "type": "custom:vacuum-card",
                  "entity": "vacuum.ditto",
                  "image": "default",
                  "stats": {
                    "default": [
                      {
                        "entity_id": "sensor.vacuum_last_qm",
                        "subtitle": "Last clean area"
                      },
                      {
                        "entity_id": "sensor.vacuum_last_run",
                        "subtitle": "Last clean date"
                      }
                    ]
                  },
                  "shortcuts": [
                    {
                      "name": "Clean living room",
                      "service": "neato.custom_cleaning",
                      "service_data": {
                        "entity_id": "vacuum.ditto",
                        "zone": "Living room"
                      },
                      "icon": "mdi:sofa"
                    },
                    {
                      "name": "Clean Whole Room",
                      "service": "neato.custom_cleaning",
                      "service_data": {
                        "entity_id": "vacuum.ditto",
                        "zone": "Whole room"
                      },
                      "icon": "mdi:silverware-fork-knife"
                    },
                    {
                      "name": "Clean Kitchen",
                      "service": "neato.custom_cleaning",
                      "service_data": {
                        "entity_id": "vacuum.ditto",
                        "zone": "Kitchen"
                      },
                      "icon": "mdi:fridge-variant"
                    },
                    {
                      "name": "Clean Hallway",
                      "service": "neato.custom_cleaning",
                      "service_data": {
                        "entity_id": "vacuum.ditto",
                        "zone": "Hallway"
                      },
                      "icon": "mdi:coat-rack"
                    }
                  ],
                  "compact_view": false,
                  "show_name": true,
                  "show_status": true,
                  "show_toolbar": true
                },
                {
                  "type": "custom:card-templater",
                  "entities": [
                    "sensor.temps_min_stats",
                    "sensor.temps_max_stats"
                  ],
                  "card": {
                    "color_thresholds": [
                      {
                        "value_template": "{{ states(\"sensor.temps_min_stats\")|float - states(\"sensor.temps_min_stats\")|float }}",
                        "color_template": "{{ states(\"input_text.colour_low\")}}"
                      },
                      {
                        "value_template": "{{ states(\"sensor.temps_min_stats\")|float }}",
                        "color_template": "{{ states(\"input_text.colour_medium_low\")}}"
                      },
                      {
                        "value_template": "{{ (states(\"sensor.temps_min_stats\")|float +  states(\"sensor.temps_max_stats\")|float)/2 }}",
                        "color_template": "{{ states(\"input_text.colour_medium\")}}"
                      },
                      {
                        "value_template": "{{ states(\"sensor.temps_max_stats\")|float }}",
                        "color_template": "{{ states(\"input_text.colour_medium_high\")}}"
                      },
                      {
                        "value_template": "{{ states(\"sensor.temps_max_stats\")|float - states(\"sensor.temps_max_stats\")|float }}",
                        "color_template": "{{ states(\"input_text.colour_high\")}}"
                      }
                    ],
                    "entities": [
                      {
                        "entity": "sensor.kitchen_climate_temperature",
                        "index": 0,
                        "name": "Temp"
                      },
                      {
                        "entity": "sensor.daytime",
                        "y_axis": "secondary",
                        "color": "orange",
                        "name": "Day/Night",
                        "show_fill": true,
                        "show_line": false,
                        "smoothing": false,
                        "show_state": false
                      },
                      {
                        "entity": "climate.hive_thermostat",
                        "attribute": "hvac_action",
                        "y_axis": "secondary",
                        "color": "grey",
                        "name": "Heating",
                        "show_fill": true,
                        "show_line": false,
                        "smoothing": false,
                        "show_state": true
                      }
                    ],
                    "state_map": [
                      {
                        "label": "Idle",
                        "value": "idle"
                      },
                      {
                        "label": "Heating",
                        "value": "heating"
                      }
                    ],
                    "name": "Kitchen",
                    "points_per_hour": 20,
                    "line_width": 2,
                    "show": {
                      "icon": false,
                      "labels": true,
                      "name": false
                    },
                    "type": "custom:mini-graph-card"
                  }
                },
                {
                  "type": "custom:card-templater",
                  "entities": [
                    "sensor.pm2_5_max"
                  ],
                  "card": {
                    "color_thresholds": [
                      {
                        "value": 1,
                        "color": "#00bb00"
                      },
                      {
                        "value": 36,
                        "color": "#ffbf00"
                      },
                      {
                        "value": 86,
                        "color": "#ff0000"
                      }
                    ],
                    "entities": [
                      {
                        "entity": "sensor.air_quality_pm2_5",
                        "index": 0,
                        "name": "PM2.5"
                      }
                    ],
                    "name": "Air Quality",
                    "aggregate_func": "avg",
                    "points_per_hour": 60,
                    "color_thresholds_transition": "hard",
                    "upper_bound_template": "{{ [state_attr(\"sensor.pm2_5_max\",\"max_value\"), 300] | min }}",
                    "show": {
                      "icon": true,
                      "labels": true,
                      "name": true
                    },
                    "type": "custom:mini-graph-card"
                  }
                },
                {
                  "type": "custom:card-templater",
                  "entities": [
                    "sensor.temps_min_stats",
                    "sensor.temps_max_stats"
                  ],
                  "card": {
                    "color_thresholds": [
                      {
                        "value_template": "{{ state_attr(\"sensor.temps_min_stats\", \"min_value\") - state_attr(\"sensor.temps_min_stats\", \"standard_deviation\") }}",
                        "color_template": "{{ states(\"input_text.colour_low\")}}"
                      },
                      {
                        "value_template": "{{ state_attr(\"sensor.temps_min_stats\", \"mean\") }}",
                        "color_template": "{{ states(\"input_text.colour_medium_low\")}}"
                      },
                      {
                        "value_template": "{{ (state_attr(\"sensor.temps_min_stats\", \"mean\") +  state_attr(\"sensor.temps_max_stats\", \"mean\"))/2 }}",
                        "color_template": "{{ states(\"input_text.colour_medium\")}}"
                      },
                      {
                        "value_template": "{{ {{ state_attr(\"sensor.temps_max_stats\", \"mean\") }} }}",
                        "color_template": "{{ states(\"input_text.colour_medium_high\")}}"
                      },
                      {
                        "value_template": "{{ state_attr(\"sensor.temps_max_stats\", \"max_value\") - state_attr(\"sensor.temps_max_stats\", \"standard_deviation\") }}",
                        "color_template": "{{ states(\"input_text.colour_high\")}}"
                      }
                    ],
                    "entities": [
                      {
                        "entity": "sensor.air_quality_temperature",
                        "index": 0,
                        "name": "Temp"
                      },
                      {
                        "color": "var(--humidity)",
                        "entity": "sensor.air_quality_pressure",
                        "index": 1,
                        "name": "Pressure",
                        "y_axis": "secondary"
                      }
                    ],
                    "name": "Litchen",
                    "points_per_hour": 1,
                    "show": {
                      "icon": false,
                      "labels": true,
                      "name": false
                    },
                    "type": "custom:mini-graph-card"
                  }
                }
              ],
              "type": "vertical-stack"
            }
          ]
        },
        {
          "theme": "Backend-selected",
          "title": "Hallway",
          "path": "hallway",
          "icon": "mdi:coat-rack",
          "subview": true,
          "badges": [],
          "cards": [
            {
              "cards": [
                {
                  "name": "Hallway",
                  "template": "button-card-headers",
                  "type": "custom:button-card"
                },
                {
                  "cards": [
                    {
                      "entity": "light.hallway",
                      "name": " ",
                      "type": "tile",
                      "show_entity_picture": false,
                      "vertical": false
                    }
                  ],
                  "type": "horizontal-stack"
                },
                {
                  "entity": "binary_sensor.hue_motion_sensor_motion",
                  "type": "tile"
                },
                {
                  "type": "custom:card-templater",
                  "entities": [
                    "sensor.temps_min_stats",
                    "sensor.temps_max_stats"
                  ],
                  "card": {
                    "color_thresholds": [
                      {
                        "value_template": "{{ states(\"sensor.temps_min_stats\")|float - states(\"sensor.temps_min_stats\")|float }}",
                        "color_template": "{{ states(\"input_text.colour_low\")}}"
                      },
                      {
                        "value_template": "{{ states(\"sensor.temps_min_stats\")|float }}",
                        "color_template": "{{ states(\"input_text.colour_medium_low\")}}"
                      },
                      {
                        "value_template": "{{ (states(\"sensor.temps_min_stats\")|float +  states(\"sensor.temps_max_stats\")|float)/2 }}",
                        "color_template": "{{ states(\"input_text.colour_medium\")}}"
                      },
                      {
                        "value_template": "{{ states(\"sensor.temps_max_stats\")|float }}",
                        "color_template": "{{ states(\"input_text.colour_medium_high\")}}"
                      },
                      {
                        "value_template": "{{ states(\"sensor.temps_max_stats\")|float - states(\"sensor.temps_max_stats\")|float }}",
                        "color_template": "{{ states(\"input_text.colour_high\")}}"
                      }
                    ],
                    "entities": [
                      {
                        "entity": "sensor.hue_motion_sensor_temperature",
                        "index": 0,
                        "name": "Temp",
                        "show_fill": false
                      },
                      {
                        "entity": "sensor.daytime",
                        "y_axis": "secondary",
                        "color": "orange",
                        "name": "Day/Night",
                        "show_fill": true,
                        "show_line": false,
                        "smoothing": false,
                        "show_state": false
                      },
                      {
                        "entity": "climate.hive_thermostat",
                        "attribute": "hvac_action",
                        "y_axis": "secondary",
                        "color": "grey",
                        "name": "Heating",
                        "show_fill": true,
                        "show_line": false,
                        "smoothing": false,
                        "show_state": true
                      }
                    ],
                    "state_map": [
                      {
                        "label": "Idle",
                        "value": "idle"
                      },
                      {
                        "label": "Heating",
                        "value": "heating"
                      }
                    ],
                    "name": "Hallway",
                    "points_per_hour": 20,
                    "line_width": 2,
                    "show": {
                      "icon": false,
                      "labels": true,
                      "name": false
                    },
                    "type": "custom:mini-graph-card"
                  }
                }
              ],
              "type": "vertical-stack"
            }
          ]
        },
        {
          "theme": "Backend-selected",
          "title": "Utility",
          "path": "utility",
          "icon": "mdi:washing-machine",
          "subview": true,
          "badges": [],
          "cards": [
            {
              "type": "custom:mushroom-climate-card",
              "entity": "climate.hive_thermostat",
              "hvac_modes": [
                "auto",
                "heat",
                "off"
              ],
              "collapsible_controls": false,
              "show_temperature_control": true
            },
            {
              "type": "vertical-stack",
              "cards": [
                {
                  "type": "entities",
                  "entities": [
                    {
                      "entities": [
                        {
                          "entity": "sensor.washing_machine_count",
                          "name": "Washes in 7d"
                        }
                      ],
                      "entity": "binary_sensor.washer",
                      "secondary_info": "last-changed",
                      "state_color": true,
                      "type": "custom:multiple-entity-row"
                    }
                  ]
                },
                {
                  "type": "custom:mushroom-entity-card",
                  "entity": "automation.washer_notify_done",
                  "name": "Washer notifications",
                  "fill_container": false,
                  "icon": "mdi:bell-outline",
                  "tap_action": {
                    "action": "toggle"
                  }
                },
                {
                  "type": "custom:mushroom-template-card",
                  "icon": "mdi:tumble-dryer",
                  "icon_color": "{% if (is_state('input_boolean.heated_airer','on')) %} blue {% endif %}",
                  "primary": "Heated airer",
                  "secondary": "{% if (is_state('input_boolean.heated_airer','on')) %} Heating for {{ (states('sensor.airer_run_time') | float * 60) | round(1) }} mins {% else %} Last used: {{ as_timestamp(states('sensor.airer_requested_power')) | timestamp_custom('%d/%m/%y %H:%M')}} {% endif %}",
                  "tap_action": {
                    "action": "toggle"
                  },
                  "entity": "input_boolean.heated_airer"
                }
              ]
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "input_boolean.heated_airer",
                  "state": "on"
                }
              ],
              "card": {
                "type": "vertical-stack",
                "cards": [
                  {
                    "type": "horizontal-stack",
                    "cards": [
                      {
                        "type": "vertical-stack",
                        "cards": [
                          {
                            "type": "custom:mushroom-template-card",
                            "primary": "Heating Airer",
                            "secondary": "Requested: {{ as_timestamp(states('sensor.airer_requested_power')) | timestamp_custom('%H:%M')}}",
                            "icon": "mdi:power",
                            "icon_color": "green",
                            "fill_container": true,
                            "multiline_secondary": false
                          },
                          {
                            "type": "custom:mushroom-entity-card",
                            "entity": "switch.heated_airer",
                            "fill_container": true
                          }
                        ]
                      },
                      {
                        "type": "custom:card-templater",
                        "entities": [
                          "sensor.airer_run_time",
                          "input_number.airer_target_runtime"
                        ],
                        "card": {
                          "type": "custom:apexcharts-card",
                          "header": {
                            "show": false,
                            "colorize_states": true
                          },
                          "chart_type": "radialBar",
                          "series": [
                            {
                              "entity": "sensor.airer_run_time",
                              "max_template": "{{ states(\"input_number.airer_target_runtime\") }}",
                              "name": "Heat time"
                            }
                          ],
                          "apex_config": {
                            "legend": false,
                            "chart": {
                              "height": "165px"
                            }
                          }
                        }
                      }
                    ]
                  },
                  {
                    "type": "custom:mushroom-number-card",
                    "entity": "input_number.airer_target_runtime",
                    "icon": "mdi:timer-sand-complete",
                    "name": "Target Run Time"
                  }
                ]
              }
            },
            {
              "type": "custom:expander-card",
              "gap": "0.6em",
              "padding": "1em",
              "clear": false,
              "title": "History",
              "overlay-margin": "2em",
              "child-padding": "0.5em",
              "button-background": "transparent",
              "cards": [
                {
                  "type": "custom:apexcharts-card",
                  "header": {
                    "show": false
                  },
                  "graph_span": "7d",
                  "span": {
                    "end": "day"
                  },
                  "series": [
                    {
                      "entity": "sensor.airer_total_daily_run_time",
                      "name": "Airer",
                      "type": "column",
                      "group_by": {
                        "func": "last",
                        "duration": "1d"
                      },
                      "show": {
                        "as_duration": "hour",
                        "extremas": true
                      }
                    },
                    {
                      "entity": "sensor.heat_pump_water_run_time",
                      "name": "HeatPump Water",
                      "type": "column",
                      "group_by": {
                        "func": "last",
                        "duration": "1d"
                      },
                      "show": {
                        "as_duration": "hour",
                        "extremas": true
                      }
                    }
                  ]
                }
              ]
            },
            {
              "type": "vertical-stack",
              "cards": [
                {
                  "type": "custom:mushroom-number-card",
                  "entity": "number.target_charge"
                },
                {
                  "type": "custom:mushroom-entity-card",
                  "entity": "switch.pv_divert_enabled",
                  "tap_action": {
                    "action": "toggle"
                  }
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "condition": "state",
                      "entity": "switch.pv_divert_enabled",
                      "state": "on"
                    }
                  ],
                  "card": {
                    "type": "custom:mushroom-number-card",
                    "entity": "number.pv_charge_limit",
                    "fill_container": false,
                    "display_mode": "slider"
                  }
                },
                {
                  "type": "custom:mushroom-chips-card",
                  "alignment": "justify",
                  "chips": [
                    {
                      "type": "entity",
                      "entity": "sensor.mixergy_coldest_water_temperature",
                      "icon_color": "blue"
                    },
                    {
                      "type": "template",
                      "content": "{{states('sensor.mixergy_heatpump_heat') | title}}",
                      "entity": "sensor.mixergy_heatpump_heat",
                      "icon": "mdi:heat-pump-outline",
                      "icon_color": "{{'green' if is_state('sensor.mixergy_heatpump_heat','on') }}"
                    },
                    {
                      "type": "template",
                      "content": "{{'On' if states('sensor.mixergy_electric_pv_power') | float > 0 else 'Off' }}",
                      "icon": "mdi:solar-power",
                      "icon_color": "{{'green' if states('sensor.mixergy_electric_pv_power') | float > 0}}",
                      "tap_action": {
                        "action": "call-service",
                        "service": "switch.toggle",
                        "target": {
                          "entity_id": "switch.pv_divert_enabled"
                        }
                      }
                    },
                    {
                      "type": "entity",
                      "entity": "sensor.mixergy_current_charge"
                    },
                    {
                      "type": "entity",
                      "entity": "sensor.mixergy_hot_water_temperature",
                      "icon_color": "red"
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "theme": "Backend-selected",
          "title": "Bathrooms",
          "path": "bathrooms",
          "icon": "mdi:bathtub",
          "subview": true,
          "badges": [],
          "cards": [
            {
              "cards": [
                {
                  "name": "Bathrooms",
                  "template": "button-card-headers",
                  "type": "custom:button-card"
                },
                {
                  "cards": [
                    {
                      "type": "custom:card-templater",
                      "entities": [
                        "sensor.temps_min_stats",
                        "sensor.temps_max_stats"
                      ],
                      "card": {
                        "color_thresholds": [
                          {
                            "value_template": "{{ states(\"sensor.temps_min_stats\")|float - states(\"sensor.temps_min_stats\")|float }}",
                            "color_template": "{{ states(\"input_text.colour_low\")}}"
                          },
                          {
                            "value_template": "{{ states(\"sensor.temps_min_stats\")|float }}",
                            "color_template": "{{ states(\"input_text.colour_medium_low\")}}"
                          },
                          {
                            "value_template": "{{ (states(\"sensor.temps_min_stats\")|float +  states(\"sensor.temps_max_stats\")|float)/2 }}",
                            "color_template": "{{ states(\"input_text.colour_medium\")}}"
                          },
                          {
                            "value_template": "{{ states(\"sensor.temps_max_stats\")|float }}",
                            "color_template": "{{ states(\"input_text.colour_medium_high\")}}"
                          },
                          {
                            "value_template": "{{ states(\"sensor.temps_max_stats\")|float - states(\"sensor.temps_max_stats\")|float }}",
                            "color_template": "{{ states(\"input_text.colour_high\")}}"
                          }
                        ],
                        "entities": [
                          {
                            "entity": "sensor.bathroom_climate_temperature",
                            "index": 0,
                            "name": "Temp"
                          },
                          {
                            "color": "var(--humidity)",
                            "entity": "sensor.bathroom_climate_humidity",
                            "index": 1,
                            "name": "Humidity",
                            "y_axis": "secondary"
                          }
                        ],
                        "name": "Main Bathroom",
                        "points_per_hour": 1,
                        "show": {
                          "labels": true
                        },
                        "type": "custom:mini-graph-card"
                      }
                    },
                    {
                      "type": "custom:card-templater",
                      "entities": [
                        "sensor.temps_min_stats",
                        "sensor.temps_max_stats"
                      ],
                      "card": {
                        "color_thresholds": [
                          {
                            "value_template": "{{ states(\"sensor.temps_min_stats\")|float - states(\"sensor.temps_min_stats\")|float }}",
                            "color_template": "{{ states(\"input_text.colour_low\")}}"
                          },
                          {
                            "value_template": "{{ states(\"sensor.temps_min_stats\")|float }}",
                            "color_template": "{{ states(\"input_text.colour_medium_low\")}}"
                          },
                          {
                            "value_template": "{{ (states(\"sensor.temps_min_stats\")|float +  states(\"sensor.temps_max_stats\")|float)/2 }}",
                            "color_template": "{{ states(\"input_text.colour_medium\")}}"
                          },
                          {
                            "value_template": "{{ states(\"sensor.temps_max_stats\")|float }}",
                            "color_template": "{{ states(\"input_text.colour_medium_high\")}}"
                          },
                          {
                            "value_template": "{{ states(\"sensor.temps_max_stats\")|float - states(\"sensor.temps_max_stats\")|float }}",
                            "color_template": "{{ states(\"input_text.colour_high\")}}"
                          }
                        ],
                        "entities": [
                          {
                            "entity": "sensor.ensuite_climate_temperature",
                            "index": 0,
                            "name": "Temp"
                          },
                          {
                            "color": "var(--humidity)",
                            "entity": "sensor.ensuite_climate_humidity",
                            "index": 1,
                            "name": "Humidity",
                            "y_axis": "secondary"
                          }
                        ],
                        "state_map": [
                          {
                            "label": "Idle",
                            "value": "idle"
                          },
                          {
                            "label": "Heating",
                            "value": "heating"
                          }
                        ],
                        "name": "Ensuite",
                        "points_per_hour": 1,
                        "show": {
                          "labels": true
                        },
                        "type": "custom:mini-graph-card"
                      }
                    }
                  ],
                  "type": "horizontal-stack"
                }
              ],
              "type": "vertical-stack"
            }
          ]
        },
        {
          "theme": "Backend-selected",
          "title": "Seb",
          "path": "seb",
          "icon": "mdi:rocket-launch",
          "subview": true,
          "badges": [],
          "cards": [
            {
              "cards": [
                {
                  "name": "Seb's Bedroom",
                  "template": "button-card-headers",
                  "type": "custom:button-card"
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "media_player.seb_s_home",
                      "state": "playing"
                    }
                  ],
                  "card": {
                    "type": "media-control",
                    "entity": "media_player.seb_s_home"
                  }
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "custom:mushroom-light-card",
                      "entity": "light.sebs_ceiling",
                      "use_light_color": true,
                      "show_brightness_control": true,
                      "show_color_temp_control": true,
                      "show_color_control": true,
                      "collapsible_controls": false
                    }
                  ]
                },
                {
                  "type": "tile",
                  "entity": "light.sebs_floorlamp",
                  "tap_action": {
                    "action": "toggle"
                  },
                  "features": [
                    {
                      "type": "light-brightness"
                    }
                  ]
                },
                {
                  "type": "custom:mushroom-light-card",
                  "entity": "light.sebs_lamp",
                  "use_light_color": true,
                  "show_brightness_control": true,
                  "show_color_temp_control": true,
                  "show_color_control": true,
                  "collapsible_controls": false
                },
                {
                  "type": "horizontal-stack",
                  "cards": [
                    {
                      "type": "tile",
                      "entity": "switch.sebs_galaxy",
                      "state_content": [
                        "state",
                        "last_changed"
                      ]
                    },
                    {
                      "type": "tile",
                      "name": "Motion",
                      "entity": "binary_sensor.seb_d1_motion"
                    }
                  ]
                },
                {
                  "type": "custom:card-templater",
                  "entities": [
                    "sensor.temps_min_stats",
                    "sensor.temps_max_stats"
                  ],
                  "card": {
                    "color_thresholds": [
                      {
                        "value_template": "{{ states(\"sensor.temps_min_stats\")|float - states(\"sensor.temps_min_stats\")|float }}",
                        "color_template": "{{ states(\"input_text.colour_low\")}}"
                      },
                      {
                        "value_template": "{{ states(\"sensor.temps_min_stats\")|float }}",
                        "color_template": "{{ states(\"input_text.colour_medium_low\")}}"
                      },
                      {
                        "value_template": "{{ (states(\"sensor.temps_min_stats\")|float +  states(\"sensor.temps_max_stats\")|float)/2 }}",
                        "color_template": "{{ states(\"input_text.colour_medium\")}}"
                      },
                      {
                        "value_template": "{{ states(\"sensor.temps_max_stats\")|float }}",
                        "color_template": "{{ states(\"input_text.colour_medium_high\")}}"
                      },
                      {
                        "value_template": "{{ states(\"sensor.temps_max_stats\")|float - states(\"sensor.temps_max_stats\")|float }}",
                        "color_template": "{{ states(\"input_text.colour_high\")}}"
                      }
                    ],
                    "entities": [
                      {
                        "entity": "sensor.seb_d1_temperature",
                        "index": 0,
                        "name": "Temp"
                      },
                      {
                        "entity": "sensor.daytime",
                        "y_axis": "secondary",
                        "color": "orange",
                        "name": "Day/Night",
                        "show_fill": true,
                        "show_line": false,
                        "smoothing": false,
                        "show_state": false
                      },
                      {
                        "entity": "climate.hive_thermostat",
                        "attribute": "hvac_action",
                        "y_axis": "secondary",
                        "color": "grey",
                        "name": "Heating",
                        "show_fill": true,
                        "show_line": false,
                        "smoothing": false,
                        "show_state": true
                      }
                    ],
                    "state_map": [
                      {
                        "label": "Idle",
                        "value": "idle"
                      },
                      {
                        "label": "Heating",
                        "value": "heating"
                      }
                    ],
                    "name": "Seb's room",
                    "line_width": 2,
                    "points_per_hour": 20,
                    "show": {
                      "icon": false,
                      "labels": true,
                      "name": false
                    },
                    "type": "custom:mini-graph-card"
                  }
                }
              ],
              "type": "vertical-stack"
            }
          ]
        },
        {
          "theme": "Backend-selected",
          "title": "Reu",
          "path": "reu",
          "icon": "mdi:dolphin",
          "subview": true,
          "badges": [],
          "cards": [
            {
              "cards": [
                {
                  "name": "Reuben's Bedroom",
                  "template": "button-card-headers",
                  "type": "custom:button-card"
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "media_player.reuben_s_room_speaker",
                      "state": "playing"
                    }
                  ],
                  "card": {
                    "type": "media-control",
                    "entity": "media_player.reuben_s_room_speaker"
                  }
                },
                {
                  "type": "custom:mushroom-light-card",
                  "entity": "light.reubens_ceiling",
                  "use_light_color": true,
                  "show_brightness_control": true,
                  "show_color_temp_control": true,
                  "show_color_control": true,
                  "collapsible_controls": false
                },
                {
                  "type": "custom:mushroom-light-card",
                  "entity": "light.rname",
                  "use_light_color": true,
                  "show_brightness_control": true,
                  "show_color_temp_control": true,
                  "show_color_control": true,
                  "collapsible_controls": false
                },
                {
                  "cards": [
                    {
                      "type": "tile",
                      "entity": "switch.reus_galaxy",
                      "name": "Galaxy",
                      "show_entity_picture": false,
                      "vertical": false,
                      "hide_state": false,
                      "state_content": [
                        "state",
                        "last_changed"
                      ]
                    },
                    {
                      "entity": "binary_sensor.reu_d1_motion",
                      "icon": "mdi:motion-sensor",
                      "type": "tile"
                    }
                  ],
                  "type": "horizontal-stack"
                },
                {
                  "cards": [
                    {
                      "type": "custom:card-templater",
                      "entities": [
                        "sensor.temps_min_stats",
                        "sensor.temps_max_stats"
                      ],
                      "card": {
                        "color_thresholds": [
                          {
                            "value_template": "{{ states(\"sensor.temps_min_stats\")|float - states(\"sensor.temps_min_stats\")|float }}",
                            "color_template": "{{ states(\"input_text.colour_low\")}}"
                          },
                          {
                            "value_template": "{{ states(\"sensor.temps_min_stats\")|float }}",
                            "color_template": "{{ states(\"input_text.colour_medium_low\")}}"
                          },
                          {
                            "value_template": "{{ (states(\"sensor.temps_min_stats\")|float +  states(\"sensor.temps_max_stats\")|float)/2 }}",
                            "color_template": "{{ states(\"input_text.colour_medium\")}}"
                          },
                          {
                            "value_template": "{{ states(\"sensor.temps_max_stats\")|float }}",
                            "color_template": "{{ states(\"input_text.colour_medium_high\")}}"
                          },
                          {
                            "value_template": "{{ states(\"sensor.temps_max_stats\")|float - states(\"sensor.temps_max_stats\")|float }}",
                            "color_template": "{{ states(\"input_text.colour_high\")}}"
                          }
                        ],
                        "entities": [
                          {
                            "entity": "sensor.reu_d1_temperature",
                            "index": 0,
                            "name": "Temp"
                          },
                          {
                            "entity": "climate.hive_thermostat",
                            "attribute": "hvac_action",
                            "y_axis": "secondary",
                            "color": "grey",
                            "name": "Heating",
                            "show_fill": true,
                            "show_line": false,
                            "smoothing": false,
                            "show_state": true
                          },
                          {
                            "entity": "sensor.daytime",
                            "y_axis": "secondary",
                            "color": "orange",
                            "name": "Day/Night",
                            "show_fill": true,
                            "show_line": false,
                            "smoothing": false,
                            "show_state": false
                          }
                        ],
                        "state_map": [
                          {
                            "label": "Idle",
                            "value": "idle"
                          },
                          {
                            "label": "Heating",
                            "value": "heating"
                          }
                        ],
                        "name": "Reuben's Room",
                        "points_per_hour": 20,
                        "align_icon": "state",
                        "show": {
                          "icon": true,
                          "labels": true,
                          "name": false
                        },
                        "type": "custom:mini-graph-card"
                      }
                    }
                  ],
                  "type": "horizontal-stack"
                }
              ],
              "type": "vertical-stack"
            }
          ]
        }
      ]
    }
  }
}